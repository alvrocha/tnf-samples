2018-04-30 11:00:37.741 -03:00 [INFO] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '"C:\Users\josue.agnese\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-04-30 11:00:59.939 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 11:01:00.113 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone,Tnf.Rac.UserManagement.IsEmailConfirmationRequiredForLogin,Tnf.Rac.UserManagement.TwoFactorLogin.IsEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsEmailProviderEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsSmsProviderEnabled,Tnf.Rac.UserManagement.UserLockOut.IsEnabled,Tnf.Rac.UserManagement.UserLockOut.MaxFailedAccessAttemptsBeforeLockout,Tnf.Rac.UserManagement.UserLockOut.DefaultAccountLockoutSeconds,Tnf.Rac.UserManagement.PasswordComplexity.RequireDigit,Tnf.Rac.UserManagement.PasswordComplexity.RequireLowercase,Tnf.Rac.UserManagement.PasswordComplexity.RequireNonAlphanumeric,Tnf.Rac.UserManagement.PasswordComplexity.RequireUppercase,Tnf.Rac.UserManagement.PasswordComplexity.RequiredLength,TnfExternalAuthentication.IsEnabled,TnfExternalAuthentication.SourceName,TnfExternalAuthentication.GetValidateCredentialAddress,TnfExternalAuthentication.GetUserInfoAddress]
2018-04-30 11:01:00.136 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 11:01:01.258 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:01:02.182 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:02.190 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 11:01:02.281 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:02.383 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:02.385 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 11:01:02.404 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:02.407 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-04-30 11:01:02.421 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:01:02.427 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:02.651 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2724.2923ms 200 application/json; charset=UTF-8
2018-04-30 11:01:02.662 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-04-30 11:01:02.664 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-04-30 11:01:02.695 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 33.5801ms 200 application/json; charset=UTF-8
2018-04-30 11:01:02.732 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 65
2018-04-30 11:01:02.739 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-04-30 11:01:02.766 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:01:02.873 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:02.882 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:01:02.929 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:02.939 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:01:02.948 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:01:02.956 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:01:02.965 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:02.975 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:01:02.978 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:01:02.979 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:01:02.988 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:01:03.172 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "js_oidc",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLDEKB2N8OAF:00000001",
  "TimeStamp": "2018-04-30T14:01:03Z",
  "ProcessId": 12864,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 11:01:03.275 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:03.278 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:01:03.318 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:03.319 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:01:03.323 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:03.325 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:01:03.328 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:01:03.329 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:03.345 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:03.347 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:01:03.349 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:03.350 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:01:03.351 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:03.351 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:01:03.352 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:01:03.354 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:03.375 -03:00 [INFO] IdentityServer4.Validation.TokenRequestValidator Token request validation success
"{
  \"ClientId\": \"js_oidc\",
  \"ClientName\": \"JavaScript OIDC Client\",
  \"GrantType\": \"client_credentials\",
  \"Scopes\": \"authorization_api backend_api\",
  \"Raw\": {
    \"grant_type\": \"client_credentials\",
    \"scope\": \"authorization_api backend_api\"
  }
}"
2018-04-30 11:01:03.519 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "js_oidc",
  "ClientName": "JavaScript OIDC Client",
  "Endpoint": "Token",
  "Scopes": "authorization_api backend_api",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****p0dg"
    }
  ],
  "ActivityId": "0HLDEKB2N8OAF:00000001",
  "TimeStamp": "2018-04-30T14:01:03Z",
  "ProcessId": 12864,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 11:01:03.536 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 804.1827ms 200 application/json; charset=UTF-8
2018-04-30 11:01:18.008 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDExOjAxOjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 11:01:18.070 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:01:18.072 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:01:18.077 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 11:01:18.122 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:01:18.123 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:18.126 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:01:18.127 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:18.127 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:01:18.128 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:01:18.129 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:01:18.132 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:18.133 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:01:18.134 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:01:18.136 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:01:18.136 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:01:18.173 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:18.175 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:01:18.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:18.187 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:01:18.188 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:18.189 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:01:18.189 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:01:18.190 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:18.193 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:18.198 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:01:18.200 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:18.202 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:01:18.203 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:18.204 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:01:18.205 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:01:18.205 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:18.243 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api backend_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjAxOjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"SessionId\": \"3f4902359321b12be9037ecc1d9ddad8\",
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"authorization_api backend_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDExOjAxOjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:poa\"
  }
}"
2018-04-30 11:01:19.232 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "backend_api",
  "ClientName": "Backend API",
  "RedirectUri": "http://localhost:5055/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "2",
  "Scopes": "authorization_api backend_api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****bJoQ"
    }
  ],
  "ActivityId": "0HLDEKB2N8OAG:00000001",
  "TimeStamp": "2018-04-30T14:01:19Z",
  "ProcessId": 12864,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 11:01:19.237 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"2\",
  \"ClientId\": \"backend_api\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjAxOjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"Scope\": \"authorization_api backend_api\"
}"
2018-04-30 11:01:19.269 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1260.7185ms 302 
2018-04-30 11:01:56.208 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=backend_api%20authorization_api&state=TW9uIEFwciAzMCAyMDE4IDExOjAxOjU2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 11:01:56.210 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:01:56.210 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:01:56.211 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 11:01:56.212 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:01:56.215 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:56.216 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:01:56.217 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:56.217 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:01:56.217 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:01:56.217 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:01:56.218 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:56.218 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:01:56.218 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:01:56.219 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:01:56.219 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:01:56.220 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:56.222 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:01:56.224 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:56.227 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:01:56.227 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:56.228 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:01:56.229 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:01:56.229 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:56.232 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:56.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:01:56.235 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:01:56.237 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:01:56.237 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:01:56.238 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:01:56.238 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:01:56.239 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:01:56.239 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"backend_api authorization_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjAxOjU2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"SessionId\": \"3f4902359321b12be9037ecc1d9ddad8\",
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"backend_api authorization_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDExOjAxOjU2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:poa\"
  }
}"
2018-04-30 11:01:56.279 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "backend_api",
  "ClientName": "Backend API",
  "RedirectUri": "http://localhost:5055/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "2",
  "Scopes": "backend_api authorization_api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****N5bw"
    }
  ],
  "ActivityId": "0HLDEKB2N8OAG:00000002",
  "TimeStamp": "2018-04-30T14:01:56Z",
  "ProcessId": 12864,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 11:01:56.279 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"2\",
  \"ClientId\": \"backend_api\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjAxOjU2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"Scope\": \"backend_api authorization_api\"
}"
2018-04-30 11:01:56.280 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 72.1761ms 302 
2018-04-30 11:03:06.223 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 11:03:06.225 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 11:03:06.227 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:03:06.229 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:06.231 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:03:06.232 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:06.232 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:03:06.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:03:06.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:03:06.234 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:06.234 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:03:06.234 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:03:06.235 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:03:06.235 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:03:06.236 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:06.239 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:03:06.240 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:06.242 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:03:06.243 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:06.243 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:03:06.244 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:03:06.247 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:06.251 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:06.253 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:03:06.256 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:06.258 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:03:06.258 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:06.259 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:03:06.260 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:03:06.260 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:06.261 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api backend_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"authorization_api backend_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:poa\"
  }
}"
2018-04-30 11:03:06.261 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-04-30 11:03:06.270 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 47.6922ms 302 
2018-04-30 11:03:06.272 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dauthorization_api%2520backend_api%26state%3DTW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Apoa  
2018-04-30 11:03:06.783 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 3 localization sources.
2018-04-30 11:03:06.792 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRac
2018-04-30 11:03:06.792 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRacIdentity
2018-04-30 11:03:06.816 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-04-30 11:03:06.988 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa"]) - ModelState is Valid
2018-04-30 11:03:07.009 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:03:07.010 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:07.012 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:03:07.012 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:07.013 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:03:07.013 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:03:07.013 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:03:07.014 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:07.014 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:03:07.014 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:03:07.014 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:03:07.014 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:03:07.016 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:07.017 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:03:07.018 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:07.020 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:03:07.020 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:07.020 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:03:07.021 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:03:07.021 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:07.023 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:07.025 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:03:07.026 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:07.027 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:03:07.028 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:07.030 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:03:07.031 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:03:07.032 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:07.038 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:07.039 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:03:07.039 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:07.040 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:03:07.040 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:03:07.040 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:03:07.040 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:07.040 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:03:07.040 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:03:07.041 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:03:07.041 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:03:07.104 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-04-30 11:03:07.564 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 680.0127ms
2018-04-30 11:03:07.570 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1297.5755ms 200 text/html; charset=utf-8
2018-04-30 11:03:07.609 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-04-30 11:03:07.616 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf  
2018-04-30 11:03:07.616 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Bold.51066f4d1d33630cd761.ttf  
2018-04-30 11:03:07.622 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 11:03:07.622 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 11:03:07.622 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 11:03:07.647 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 31.4834ms 404 
2018-04-30 11:03:07.648 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 32.4189ms 404 
2018-04-30 11:03:07.649 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 39.7953ms 404 
2018-04-30 11:03:12.456 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dauthorization_api%2520backend_api%26state%3DTW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Apoa application/x-www-form-urlencoded 620
2018-04-30 11:03:12.456 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 11:03:12.523 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["Tnf.Rac.OpenIdOAuth2.ViewModels.LoginInputViewModel"]) - ModelState is Valid
2018-04-30 11:03:12.668 -03:00 [INFO] Tnf.Rac.Authorization.ExternalAuthentication.TnfExternalAuthenticationSource ExtenalAuthentication -> TryAuthenticateAsync settings of external url authentication not found for tenant 1
2018-04-30 11:03:13.120 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-04-30 11:03:13.134 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor Executing JsonResult, writing value "{ TargetUrl = /connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa }".
2018-04-30 11:03:13.139 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 657.9607ms
2018-04-30 11:03:13.139 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 683.5816ms 302 application/json; charset=utf-8
2018-04-30 11:03:13.142 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 11:03:13.143 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:03:13.143 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:03:13.145 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
2018-04-30 11:03:13.158 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:03:13.166 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:13.167 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:03:13.168 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:13.168 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:03:13.169 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:03:13.169 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:03:13.170 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:13.170 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:03:13.170 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:03:13.170 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:03:13.171 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:03:13.172 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:13.173 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:03:13.174 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:13.175 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:03:13.176 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:13.176 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:03:13.177 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:03:13.178 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:13.179 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:13.181 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:03:13.182 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:13.184 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:03:13.184 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:13.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:03:13.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:03:13.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:13.186 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api backend_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"SessionId\": \"db28c516d7cc03b9716f0807dc883f87\",
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"authorization_api backend_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:poa\"
  }
}"
2018-04-30 11:03:13.200 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "backend_api",
  "ClientName": "Backend API",
  "RedirectUri": "http://localhost:5055/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "2",
  "Scopes": "authorization_api backend_api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****6PrQ"
    }
  ],
  "ActivityId": "0HLDEKB2N8OAG:00000007",
  "TimeStamp": "2018-04-30T14:03:13Z",
  "ProcessId": 12864,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 11:03:13.200 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"2\",
  \"ClientId\": \"backend_api\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjAzOjA2IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"Scope\": \"authorization_api backend_api\"
}"
2018-04-30 11:03:13.206 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-04-30 11:03:13.207 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 64.7807ms 302 
2018-04-30 11:03:39.346 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=backend_api%20authorization_api&state=TW9uIEFwciAzMCAyMDE4IDExOjAzOjM5IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 11:03:39.347 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:03:39.347 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:03:39.348 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 11:03:39.349 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:03:39.352 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:39.355 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:03:39.356 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:39.358 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:03:39.359 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:03:39.363 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:03:39.365 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:39.365 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:03:39.365 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:03:39.366 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:03:39.367 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:03:39.368 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:39.370 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:03:39.373 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:39.375 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:03:39.377 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:39.378 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:03:39.379 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:03:39.379 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:39.382 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:39.384 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:03:39.385 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:03:39.387 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:03:39.387 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:03:39.388 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:03:39.388 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:03:39.391 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:03:39.393 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"backend_api authorization_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjAzOjM5IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"SessionId\": \"db28c516d7cc03b9716f0807dc883f87\",
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"backend_api authorization_api\",
    \2018-04-30 11:05:16.106 -03:00 [INFO] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '"C:\Users\josue.agnese\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-04-30 11:05:33.971 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 11:05:34.079 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone,Tnf.Rac.UserManagement.IsEmailConfirmationRequiredForLogin,Tnf.Rac.UserManagement.TwoFactorLogin.IsEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsEmailProviderEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsSmsProviderEnabled,Tnf.Rac.UserManagement.UserLockOut.IsEnabled,Tnf.Rac.UserManagement.UserLockOut.MaxFailedAccessAttemptsBeforeLockout,Tnf.Rac.UserManagement.UserLockOut.DefaultAccountLockoutSeconds,Tnf.Rac.UserManagement.PasswordComplexity.RequireDigit,Tnf.Rac.UserManagement.PasswordComplexity.RequireLowercase,Tnf.Rac.UserManagement.PasswordComplexity.RequireNonAlphanumeric,Tnf.Rac.UserManagement.PasswordComplexity.RequireUppercase,Tnf.Rac.UserManagement.PasswordComplexity.RequiredLength,TnfExternalAuthentication.IsEnabled,TnfExternalAuthentication.SourceName,TnfExternalAuthentication.GetValidateCredentialAddress,TnfExternalAuthentication.GetUserInfoAddress]
2018-04-30 11:05:34.094 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 11:05:35.403 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:05:36.613 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:36.629 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 11:05:36.844 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:37.129 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:37.130 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 11:05:37.156 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:37.161 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-04-30 11:05:37.193 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:05:37.196 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:37.614 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3650.1919ms 200 application/json; charset=UTF-8
2018-04-30 11:05:37.631 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-04-30 11:05:37.633 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-04-30 11:05:37.666 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 33.4588ms 200 application/json; charset=UTF-8
2018-04-30 11:05:37.716 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 65
2018-04-30 11:05:37.727 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-04-30 11:05:37.759 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:05:37.857 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:37.863 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:05:37.916 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:37.927 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:05:37.936 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:05:37.946 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:05:37.957 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:37.966 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:05:37.969 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:05:37.971 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:05:37.982 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:05:38.143 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "js_oidc",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLDEKDOCQM67:00000001",
  "TimeStamp": "2018-04-30T14:05:38Z",
  "ProcessId": 18872,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 11:05:38.317 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:38.321 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:05:38.415 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:38.417 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:05:38.423 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:38.426 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:05:38.440 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:05:38.443 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:38.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:38.470 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:05:38.472 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:38.474 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:05:38.476 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:38.476 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:05:38.477 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:05:38.478 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:38.514 -03:00 [INFO] IdentityServer4.Validation.TokenRequestValidator Token request validation success
"{
  \"ClientId\": \"js_oidc\",
  \"ClientName\": \"JavaScript OIDC Client\",
  \"GrantType\": \"client_credentials\",
  \"Scopes\": \"authorization_api backend_api\",
  \"Raw\": {
    \"grant_type\": \"client_credentials\",
    \"scope\": \"authorization_api backend_api\"
  }
}"
2018-04-30 11:05:38.746 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "js_oidc",
  "ClientName": "JavaScript OIDC Client",
  "Endpoint": "Token",
  "Scopes": "authorization_api backend_api",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****z7QA"
    }
  ],
  "ActivityId": "0HLDEKDOCQM67:00000001",
  "TimeStamp": "2018-04-30T14:05:38Z",
  "ProcessId": 18872,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 11:05:38.782 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1065.8925ms 200 application/json; charset=UTF-8
2018-04-30 11:05:57.199 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 11:05:57.206 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 11:05:57.262 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:05:57.265 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:57.271 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:05:57.272 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:57.274 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:05:57.276 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:05:57.276 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:05:57.278 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:57.280 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:05:57.280 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:05:57.280 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:05:57.281 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:05:57.312 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:57.313 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:05:57.315 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:57.316 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:05:57.317 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:57.317 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:05:57.319 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:05:57.320 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:57.327 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:57.328 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:05:57.330 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:57.332 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:05:57.333 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:57.333 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:05:57.334 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:05:57.334 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:57.376 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api backend_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"authorization_api backend_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:poa\"
  }
}"
2018-04-30 11:05:57.390 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-04-30 11:05:57.403 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 203.6414ms 302 
2018-04-30 11:05:57.405 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dauthorization_api%2520backend_api%26state%3DTW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Apoa  
2018-04-30 11:05:58.004 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 3 localization sources.
2018-04-30 11:05:58.015 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRac
2018-04-30 11:05:58.015 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRacIdentity
2018-04-30 11:05:58.033 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-04-30 11:05:58.210 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa"]) - ModelState is Valid
2018-04-30 11:05:58.230 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:05:58.231 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:58.232 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:05:58.232 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:58.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:05:58.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:05:58.234 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:05:58.237 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:58.239 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:05:58.239 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:05:58.239 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:05:58.240 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:05:58.242 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:58.244 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:05:58.246 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:58.247 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:05:58.248 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:58.248 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:05:58.248 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:05:58.249 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:58.252 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:58.259 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:05:58.261 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:58.265 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:05:58.266 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:58.266 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:05:58.267 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:05:58.267 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:58.275 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:05:58.276 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:05:58.276 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:05:58.277 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:05:58.277 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:05:58.277 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:05:58.277 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:05:58.277 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:05:58.278 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:05:58.278 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:05:58.278 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:05:58.353 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-04-30 11:05:58.773 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 665.9898ms
2018-04-30 11:05:58.780 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1374.2011ms 200 text/html; charset=utf-8
2018-04-30 11:05:58.803 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-04-30 11:05:58.807 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf  
2018-04-30 11:05:58.808 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Bold.51066f4d1d33630cd761.ttf  
2018-04-30 11:05:58.815 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 11:05:58.815 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 11:05:58.815 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 11:05:58.851 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 42.6963ms 404 
2018-04-30 11:05:58.851 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 48.4901ms 404 
2018-04-30 11:05:58.852 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 44.6022ms 404 
2018-04-30 11:06:04.471 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dauthorization_api%2520backend_api%26state%3DTW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Apoa application/x-www-form-urlencoded 620
2018-04-30 11:06:04.471 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 11:06:04.549 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["Tnf.Rac.OpenIdOAuth2.ViewModels.LoginInputViewModel"]) - ModelState is Valid
2018-04-30 11:06:04.977 -03:00 [INFO] Tnf.Rac.Authorization.ExternalAuthentication.TnfExternalAuthenticationSource ExtenalAuthentication -> TryAuthenticateAsync settings of external url authentication not found for tenant 1
2018-04-30 11:06:05.716 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-04-30 11:06:05.730 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor Executing JsonResult, writing value "{ TargetUrl = /connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa }".
2018-04-30 11:06:05.738 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 1242.7266ms
2018-04-30 11:06:05.739 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1267.3199ms 302 application/json; charset=utf-8
2018-04-30 11:06:05.742 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 11:06:05.765 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:06:05.765 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:06:05.767 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
2018-04-30 11:06:05.778 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:06:05.784 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:06:05.786 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:06:05.786 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:06:05.786 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:06:05.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:06:05.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:06:05.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:06:05.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:06:05.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:06:05.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:06:05.788 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:06:05.789 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:06:05.790 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:06:05.792 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:06:05.793 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:06:05.794 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:06:05.794 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:06:05.794 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:06:05.795 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:06:05.796 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:06:05.798 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:06:05.799 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:06:05.802 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:06:05.802 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:06:05.802 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:06:05.803 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:06:05.803 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:06:05.805 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api backend_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"SessionId\": \"c6e2c881fa987f1111fcd55584ed26b4\",
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"authorization_api backend_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:poa\"
  }
}"
2018-04-30 11:06:06.023 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "backend_api",
  "ClientName": "Backend API",
  "RedirectUri": "http://localhost:5055/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "2",
  "Scopes": "authorization_api backend_api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****Ywhg"
    }
  ],
  "ActivityId": "0HLDEKDOCQM69:00000003",
  "TimeStamp": "2018-04-30T14:06:06Z",
  "ProcessId": 18872,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 11:06:06.030 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"2\",
  \"ClientId\": \"backend_api\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjA1OjU3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"Scope\": \"authorization_api backend_api\"
}"
2018-04-30 11:06:06.061 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-04-30 11:06:06.067 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 324.7503ms 302 
2018-04-30 11:08:04.870 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=backend_api%20authorization_api&state=TW9uIEFwciAzMCAyMDE4IDExOjA4OjA0IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 11:08:04.871 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:08:04.872 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 11:08:04.872 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 11:08:04.873 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 11:08:04.875 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:08:04.876 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 11:08:04.877 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:08:04.877 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 11:08:04.878 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 11:08:04.878 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 11:08:04.878 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:08:04.879 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 11:08:04.879 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 11:08:04.879 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 11:08:04.879 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 11:08:04.881 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:08:04.882 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:08:04.884 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:08:04.886 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:08:04.886 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:08:04.887 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:08:04.888 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:08:04.888 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:08:04.890 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:08:04.891 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 11:08:04.893 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 11:08:04.895 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 11:08:04.896 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 11:08:04.897 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 11:08:04.898 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 11:08:04.899 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 11:08:04.900 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"backend_api authorization_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDExOjA4OjA0IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"SessionId\": \"c6e2c881fa987f1111fcd55584ed26b4\",
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"backend_api authorization_api\",
    \"state\": \"TW9uIEFwc2018-04-30 14:55:58.357 -03:00 [INFO] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '"C:\Users\josue.agnese\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-04-30 14:56:28.018 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 14:56:28.194 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone,Tnf.Rac.UserManagement.IsEmailConfirmationRequiredForLogin,Tnf.Rac.UserManagement.TwoFactorLogin.IsEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsEmailProviderEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsSmsProviderEnabled,Tnf.Rac.UserManagement.UserLockOut.IsEnabled,Tnf.Rac.UserManagement.UserLockOut.MaxFailedAccessAttemptsBeforeLockout,Tnf.Rac.UserManagement.UserLockOut.DefaultAccountLockoutSeconds,Tnf.Rac.UserManagement.PasswordComplexity.RequireDigit,Tnf.Rac.UserManagement.PasswordComplexity.RequireLowercase,Tnf.Rac.UserManagement.PasswordComplexity.RequireNonAlphanumeric,Tnf.Rac.UserManagement.PasswordComplexity.RequireUppercase,Tnf.Rac.UserManagement.PasswordComplexity.RequiredLength,TnfExternalAuthentication.IsEnabled,TnfExternalAuthentication.SourceName,TnfExternalAuthentication.GetValidateCredentialAddress,TnfExternalAuthentication.GetUserInfoAddress]
2018-04-30 14:56:28.215 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 14:56:29.321 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:56:30.391 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:56:30.403 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 14:56:30.524 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:56:30.684 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:56:30.685 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 14:56:30.714 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:56:30.725 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-04-30 14:56:30.754 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:56:30.758 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:56:31.295 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3288.6561ms 200 application/json; charset=UTF-8
2018-04-30 14:56:31.308 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-04-30 14:56:31.310 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-04-30 14:56:31.339 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 30.4679ms 200 application/json; charset=UTF-8
2018-04-30 14:56:31.381 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 53
2018-04-30 14:56:31.391 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-04-30 14:56:31.420 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:56:31.518 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:56:31.524 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 14:56:31.574 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:56:31.587 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 14:56:31.597 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 14:56:31.605 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 14:56:31.615 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:56:31.624 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 14:56:31.630 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 14:56:31.632 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 14:56:31.641 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 14:56:31.812 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "js_oidc",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLDEOEP76L5N:00000001",
  "TimeStamp": "2018-04-30T17:56:31Z",
  "ProcessId": 21452,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 14:56:31.907 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:56:31.910 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:56:31.951 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:56:31.952 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:56:31.956 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:56:31.957 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:56:31.961 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:56:31.963 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:56:31.982 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:56:31.983 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:56:31.985 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:56:31.989 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:56:31.990 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:56:31.990 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:56:31.990 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:56:31.995 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:56:32.018 -03:00 [INFO] IdentityServer4.Validation.TokenRequestValidator Token request validation success
"{
  \"ClientId\": \"js_oidc\",
  \"ClientName\": \"JavaScript OIDC Client\",
  \"GrantType\": \"client_credentials\",
  \"Scopes\": \"authorization_api\",
  \"Raw\": {
    \"grant_type\": \"client_credentials\",
    \"scope\": \"authorization_api\"
  }
}"
2018-04-30 14:56:32.124 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "js_oidc",
  "ClientName": "JavaScript OIDC Client",
  "Endpoint": "Token",
  "Scopes": "authorization_api",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****M-Zg"
    }
  ],
  "ActivityId": "0HLDEOEP76L5N:00000001",
  "TimeStamp": "2018-04-30T17:56:32Z",
  "ProcessId": 21452,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 14:56:32.139 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 758.029ms 200 application/json; charset=UTF-8
2018-04-30 14:57:00.585 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api&state=TW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Abh  
2018-04-30 14:57:00.617 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:00.617 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:00.639 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 14:57:00.667 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:00.698 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:57:00.700 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:00.703 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 14:57:00.704 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:00.704 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 14:57:00.707 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 14:57:00.708 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 14:57:00.709 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:00.710 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 14:57:00.711 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 14:57:00.712 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 14:57:00.712 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 14:57:00.732 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:00.734 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:57:00.736 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:00.738 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:57:00.739 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:00.741 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:57:00.742 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:57:00.744 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:00.747 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:00.748 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:57:00.749 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:00.750 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:57:00.751 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:00.752 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:57:00.753 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:57:00.753 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:00.794 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:bh\"
  ],
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"authorization_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:bh\"
  }
}"
2018-04-30 14:57:00.807 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-04-30 14:57:00.819 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 233.7285ms 302 
2018-04-30 14:57:00.821 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dauthorization_api%26state%3DTW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Abh  
2018-04-30 14:57:00.822 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:00.822 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:01.411 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 3 localization sources.
2018-04-30 14:57:01.422 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRac
2018-04-30 14:57:01.422 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRacIdentity
2018-04-30 14:57:01.444 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-04-30 14:57:01.630 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api&state=TW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Abh"]) - ModelState is Valid
2018-04-30 14:57:01.649 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:01.650 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:57:01.652 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:01.654 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 14:57:01.655 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:01.657 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 14:57:01.657 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 14:57:01.658 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 14:57:01.658 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:01.658 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 14:57:01.659 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 14:57:01.659 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 14:57:01.660 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 14:57:01.661 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:01.662 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:57:01.663 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:01.664 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:57:01.665 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:01.666 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:57:01.667 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:57:01.668 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:01.669 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:01.670 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:57:01.673 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:01.675 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:57:01.677 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:01.677 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:57:01.678 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:57:01.679 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:01.691 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:01.693 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 14:57:01.693 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:01.693 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 14:57:01.693 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 14:57:01.694 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 14:57:01.694 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:01.694 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 14:57:01.694 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 14:57:01.695 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 14:57:01.695 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 14:57:01.766 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-04-30 14:57:02.174 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 651.1341ms
2018-04-30 14:57:02.179 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1357.6019ms 200 text/html; charset=utf-8
2018-04-30 14:57:02.216 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-04-30 14:57:02.227 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 14:57:02.229 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf  
2018-04-30 14:57:02.229 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 14:57:02.230 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Bold.51066f4d1d33630cd761.ttf  
2018-04-30 14:57:02.231 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 14:57:02.237 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:02.237 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:02.237 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:02.237 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:02.239 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:02.240 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:02.256 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 39.3365ms 404 
2018-04-30 14:57:02.256 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 25.9286ms 404 
2018-04-30 14:57:02.256 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 27.7439ms 404 
2018-04-30 14:57:06.292 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dauthorization_api%26state%3DTW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Abh application/x-www-form-urlencoded 602
2018-04-30 14:57:06.292 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 14:57:06.293 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:06.293 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:06.385 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["Tnf.Rac.OpenIdOAuth2.ViewModels.LoginInputViewModel"]) - ModelState is Valid
2018-04-30 14:57:06.770 -03:00 [INFO] Tnf.Rac.Authorization.ExternalAuthentication.TnfExternalAuthenticationSource ExtenalAuthentication -> TryAuthenticateAsync settings of external url authentication not found for tenant 1
2018-04-30 14:57:07.479 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-04-30 14:57:07.508 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-04-30 14:57:07.520 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor Executing JsonResult, writing value "{ TargetUrl = /connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api&state=TW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Abh }".
2018-04-30 14:57:07.529 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 1201.6206ms
2018-04-30 14:57:07.530 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1238.5379ms 302 application/json; charset=utf-8
2018-04-30 14:57:07.531 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api&state=TW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Abh  
2018-04-30 14:57:07.555 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 14:57:07.557 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 14:57:07.559 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
2018-04-30 14:57:07.573 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:57:07.579 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:07.580 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 14:57:07.580 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:07.580 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 14:57:07.581 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 14:57:07.581 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 14:57:07.582 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:07.582 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 14:57:07.582 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 14:57:07.582 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 14:57:07.583 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 14:57:07.583 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:07.584 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:57:07.586 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:07.589 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:57:07.590 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:07.590 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:57:07.591 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:57:07.591 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:07.592 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:07.593 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:57:07.596 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:07.597 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:57:07.597 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:07.598 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:57:07.598 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:57:07.598 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:07.598 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:bh\"
  ],
  \"SessionId\": \"cf20205c7f54a3e6a13a6ea5c5c5f921\",
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"authorization_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:bh\"
  }
}"
2018-04-30 14:57:07.810 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "backend_api",
  "ClientName": "Backend API",
  "RedirectUri": "http://localhost:5055/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "2",
  "Scopes": "authorization_api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****GEQg"
    }
  ],
  "ActivityId": "0HLDEOEP76L5S:00000003",
  "TimeStamp": "2018-04-30T17:57:07Z",
  "ProcessId": 21452,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 14:57:07.816 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"2\",
  \"ClientId\": \"backend_api\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDE0OjU3OjAwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"Scope\": \"authorization_api\"
}"
2018-04-30 14:57:07.839 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-04-30 14:57:07.845 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 313.5942ms 302 
2018-04-30 14:57:11.731 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 14:57:11.732 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 14:57:11.732 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:57:11.733 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:11.735 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 14:57:11.735 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:11.738 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:57:11.741 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 14:57:11.742 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:57:11.742 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-04-30 14:57:11.742 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:57:11.743 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:57:11.745 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 13.5316ms 200 application/json; charset=UTF-8
2018-04-30 14:57:11.802 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-04-30 14:57:11.803 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-04-30 14:57:11.804 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.9665ms 200 application/json; charset=UTF-8
2018-04-30 14:58:14.433 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 14:58:14.434 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 14:58:14.434 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:58:14.435 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:14.437 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 14:58:14.437 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:14.438 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:14.440 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 14:58:14.440 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:14.440 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-04-30 14:58:14.440 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:58:14.441 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:14.442 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 8.9984ms 200 application/json; charset=UTF-8
2018-04-30 14:58:14.530 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-04-30 14:58:14.530 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-04-30 14:58:14.531 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.1685ms 200 application/json; charset=UTF-8
2018-04-30 14:58:14.597 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 65
2018-04-30 14:58:14.598 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-04-30 14:58:14.599 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:58:14.600 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:14.602 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 14:58:14.603 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:14.603 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 14:58:14.604 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 14:58:14.604 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 14:58:14.605 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:14.605 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 14:58:14.606 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 14:58:14.606 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 14:58:14.606 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 14:58:14.607 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "js_oidc",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLDEOEP76L63:00000001",
  "TimeStamp": "2018-04-30T17:58:14Z",
  "ProcessId": 21452,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 14:58:14.609 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:14.612 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:58:14.615 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:14.617 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:58:14.618 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:14.618 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:58:14.619 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:58:14.619 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:14.622 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:14.623 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:58:14.626 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:14.629 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:58:14.630 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:14.631 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:58:14.632 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:58:14.637 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:14.639 -03:00 [INFO] IdentityServer4.Validation.TokenRequestValidator Token request validation success
"{
  \"ClientId\": \"js_oidc\",
  \"ClientName\": \"JavaScript OIDC Client\",
  \"GrantType\": \"client_credentials\",
  \"Scopes\": \"authorization_api backend_api\",
  \"Raw\": {
    \"grant_type\": \"client_credentials\",
    \"scope\": \"authorization_api backend_api\"
  }
}"
2018-04-30 14:58:14.642 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "js_oidc",
  "ClientName": "JavaScript OIDC Client",
  "Endpoint": "Token",
  "Scopes": "authorization_api backend_api",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****1sug"
    }
  ],
  "ActivityId": "0HLDEOEP76L63:00000001",
  "TimeStamp": "2018-04-30T17:58:14Z",
  "ProcessId": 21452,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 14:58:14.643 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 45.3448ms 200 application/json; charset=UTF-8
2018-04-30 14:58:31.459 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=backend_api%20authorization_api&state=TW9uIEFwciAzMCAyMDE4IDE0OjU4OjMxIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Abh  
2018-04-30 14:58:31.461 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 14:58:31.461 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 14:58:31.462 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 14:58:31.462 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:58:31.464 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:31.465 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 14:58:31.466 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:31.466 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 14:58:31.466 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 14:58:31.467 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 14:58:31.467 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:31.467 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 14:58:31.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 14:58:31.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 14:58:31.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 14:58:31.469 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:31.471 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:58:31.472 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:31.476 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:58:31.477 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:31.479 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:58:31.480 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:58:31.480 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:31.482 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:31.484 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:58:31.486 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:31.488 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:58:31.489 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:31.489 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:58:31.489 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:58:31.490 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:31.491 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"backend_api authorization_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDE0OjU4OjMxIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:bh\"
  ],
  \"SessionId\": \"cf20205c7f54a3e6a13a6ea5c5c5f921\",
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"backend_api authorization_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDE0OjU4OjMxIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:bh\"
  }
}"
2018-04-30 14:58:31.523 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "backend_api",
  "ClientName": "Backend API",
  "RedirectUri": "http://localhost:5055/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "2",
  "Scopes": "backend_api authorization_api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****mt1Q"
    }
  ],
  "ActivityId": "0HLDEOEP76L5S:00000004",
  "TimeStamp": "2018-04-30T17:58:31Z",
  "ProcessId": 21452,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 14:58:31.523 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"2\",
  \"ClientId\": \"backend_api\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDE0OjU4OjMxIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"Scope\": \"backend_api authorization_api\"
}"
2018-04-30 14:58:31.538 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 78.421ms 302 
2018-04-30 14:58:35.326 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 14:58:35.327 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 14:58:35.328 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:58:35.329 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:35.330 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 14:58:35.330 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:35.332 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:35.333 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 14:58:35.333 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:35.334 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-04-30 14:58:35.334 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:58:35.334 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:35.335 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 9.0351ms 200 application/json; charset=UTF-8
2018-04-30 14:58:35.403 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-04-30 14:58:35.403 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-04-30 14:58:35.404 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.0719ms 200 application/json; charset=UTF-8
2018-04-30 14:58:53.853 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDE0OjU4OjUzIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Abh  
2018-04-30 14:58:53.855 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 14:58:53.855 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 14:58:53.857 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 14:58:53.858 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 14:58:53.860 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:53.862 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 14:58:53.863 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:53.863 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 14:58:53.864 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 14:58:53.864 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 14:58:53.865 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:53.866 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 14:58:53.866 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 14:58:53.866 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 14:58:53.866 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 14:58:53.869 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:53.873 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:58:53.875 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:53.877 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:58:53.879 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:53.879 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:58:53.881 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:58:53.882 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:53.883 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:53.885 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 14:58:53.888 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 14:58:53.890 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 14:58:53.893 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 14:58:53.904 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 14:58:53.907 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 14:58:53.912 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 14:58:53.916 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api backend_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4I2018-04-30 15:46:46.895 -03:00 [INFO] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '"C:\Users\josue.agnese\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-04-30 15:47:04.911 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 15:47:05.074 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone,Tnf.Rac.UserManagement.IsEmailConfirmationRequiredForLogin,Tnf.Rac.UserManagement.TwoFactorLogin.IsEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsEmailProviderEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsSmsProviderEnabled,Tnf.Rac.UserManagement.UserLockOut.IsEnabled,Tnf.Rac.UserManagement.UserLockOut.MaxFailedAccessAttemptsBeforeLockout,Tnf.Rac.UserManagement.UserLockOut.DefaultAccountLockoutSeconds,Tnf.Rac.UserManagement.PasswordComplexity.RequireDigit,Tnf.Rac.UserManagement.PasswordComplexity.RequireLowercase,Tnf.Rac.UserManagement.PasswordComplexity.RequireNonAlphanumeric,Tnf.Rac.UserManagement.PasswordComplexity.RequireUppercase,Tnf.Rac.UserManagement.PasswordComplexity.RequiredLength,TnfExternalAuthentication.IsEnabled,TnfExternalAuthentication.SourceName,TnfExternalAuthentication.GetValidateCredentialAddress,TnfExternalAuthentication.GetUserInfoAddress]
2018-04-30 15:47:05.099 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 15:47:05.862 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 15:47:06.847 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 15:47:06.871 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 15:47:07.028 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 15:47:07.238 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 15:47:07.240 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 15:47:07.268 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 15:47:07.274 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-04-30 15:47:07.296 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 15:47:07.299 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 15:47:07.797 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2901.7057ms 200 application/json; charset=UTF-8
2018-04-30 15:47:07.900 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-04-30 15:47:07.904 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-04-30 15:47:07.942 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 42.1825ms 200 application/json; charset=UTF-8
2018-04-30 15:47:08.045 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 65
2018-04-30 15:47:08.055 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-04-30 15:47:08.108 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 15:47:08.349 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 15:47:08.365 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("11"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 15:47:08.434 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 15:47:08.448 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 15:47:08.459 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 15:47:08.478 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 15:47:08.505 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 15:47:08.516 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 15:47:08.520 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 15:47:08.522 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 15:47:08.536 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 15:47:08.847 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "js_oidc",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLDEPB28VJ8I:00000001",
  "TimeStamp": "2018-04-30T18:47:08Z",
  "ProcessId": 16588,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 15:47:09.032 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 15:47:09.036 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 15:47:09.122 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 15:47:09.125 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 15:47:09.131 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 15:47:09.133 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 15:47:09.137 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 15:47:09.138 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 15:47:09.161 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 15:47:09.162 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 15:47:09.165 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 15:47:09.166 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 15:47:09.167 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 15:47:09.167 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 15:47:09.168 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 15:47:09.170 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"A2018-04-30 16:34:01.695 -03:00 [INFO] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '"C:\Users\josue.agnese\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-04-30 16:34:39.201 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 16:34:39.413 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone,Tnf.Rac.UserManagement.IsEmailConfirmationRequiredForLogin,Tnf.Rac.UserManagement.TwoFactorLogin.IsEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsEmailProviderEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsSmsProviderEnabled,Tnf.Rac.UserManagement.UserLockOut.IsEnabled,Tnf.Rac.UserManagement.UserLockOut.MaxFailedAccessAttemptsBeforeLockout,Tnf.Rac.UserManagement.UserLockOut.DefaultAccountLockoutSeconds,Tnf.Rac.UserManagement.PasswordComplexity.RequireDigit,Tnf.Rac.UserManagement.PasswordComplexity.RequireLowercase,Tnf.Rac.UserManagement.PasswordComplexity.RequireNonAlphanumeric,Tnf.Rac.UserManagement.PasswordComplexity.RequireUppercase,Tnf.Rac.UserManagement.PasswordComplexity.RequiredLength,TnfExternalAuthentication.IsEnabled,TnfExternalAuthentication.SourceName,TnfExternalAuthentication.GetValidateCredentialAddress,TnfExternalAuthentication.GetUserInfoAddress]
2018-04-30 16:34:39.445 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 16:34:40.512 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:34:41.460 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:34:41.474 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 16:34:41.620 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:34:41.813 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:34:41.814 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 16:34:41.845 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:34:41.854 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-04-30 16:34:41.879 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:34:41.885 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:34:42.362 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3179.4268ms 200 application/json; charset=UTF-8
2018-04-30 16:34:42.522 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-04-30 16:34:42.529 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-04-30 16:34:42.588 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 66.03ms 200 application/json; charset=UTF-8
2018-04-30 16:34:42.678 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 65
2018-04-30 16:34:42.688 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-04-30 16:34:42.731 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:34:42.934 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:34:42.953 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("10"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 16:34:43.036 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:34:43.048 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 16:34:43.056 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 16:34:43.064 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 16:34:43.077 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:34:43.090 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 16:34:43.094 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 16:34:43.095 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 16:34:43.106 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 16:34:43.427 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "js_oidc",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLDEQ5KTFIFV:00000001",
  "TimeStamp": "2018-04-30T19:34:43Z",
  "ProcessId": 4188,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 16:34:43.631 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:34:43.636 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:34:43.726 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:34:43.732 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:34:43.745 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:34:43.747 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:34:43.752 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:34:43.754 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:34:43.781 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:34:43.783 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:34:43.785 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:34:43.786 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:34:43.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:34:43.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:34:43.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:34:43.789 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:34:43.833 -03:00 [INFO] IdentityServer4.Validation.TokenRequestValidator Token request validation success
"{
  \"ClientId\": \"js_oidc\",
  \"ClientName\": \"JavaScript OIDC Client\",
  \"GrantType\": \"client_credentials\",
  \"Scopes\": \"authorization_api backend_api\",
  \"Raw\": {
    \"grant_type\": \"client_credentials\",
    \"scope\": \"authorization_api backend_api\"
  }
}"
2018-04-30 16:34:44.056 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "js_oidc",
  "ClientName": "JavaScript OIDC Client",
  "Endpoint": "Token",
  "Scopes": "authorization_api backend_api",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****ujzQ"
    }
  ],
  "ActivityId": "0HLDEQ5KTFIFV:00000001",
  "TimeStamp": "2018-04-30T19:34:44Z",
  "ProcessId": 4188,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 16:34:44.077 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1400.6484ms 200 application/json; charset=UTF-8
2018-04-30 16:35:17.202 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=backend_api%20authorization_api&state=TW9uIEFwciAzMCAyMDE4IDE2OjM1OjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Abh  
2018-04-30 16:35:18.118 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed out.
2018-04-30 16:35:18.120 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.External" signed out.
2018-04-30 16:35:18.121 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.TwoFactorUserId" signed out.
2018-04-30 16:35:18.124 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "No principal."
2018-04-30 16:35:18.124 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "No principal."
2018-04-30 16:35:18.129 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 16:35:18.147 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "No principal."
2018-04-30 16:35:18.168 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:35:18.170 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:18.178 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 16:35:18.179 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:35:18.179 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 16:35:18.179 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 16:35:18.180 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 16:35:18.180 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:35:18.180 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 16:35:18.180 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 16:35:18.180 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 16:35:18.180 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 16:35:18.204 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:18.208 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:35:18.210 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:18.211 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:35:18.212 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:35:18.212 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:35:18.215 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:35:18.219 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:35:18.227 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:18.230 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:35:18.231 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:18.234 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:35:18.234 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:35:18.235 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:35:18.235 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:35:18.237 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:35:18.277 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"backend_api authorization_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDE2OjM1OjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:bh\"
  ],
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"backend_api authorization_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDE2OjM1OjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:bh\"
  }
}"
2018-04-30 16:35:18.292 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-04-30 16:35:18.304 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1101.9244ms 302 
2018-04-30 16:35:18.308 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dbackend_api%2520authorization_api%26state%3DTW9uIEFwciAzMCAyMDE4IDE2OjM1OjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Abh  
2018-04-30 16:35:18.797 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 3 localization sources.
2018-04-30 16:35:18.813 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRac
2018-04-30 16:35:18.814 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRacIdentity
2018-04-30 16:35:18.848 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-04-30 16:35:19.065 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=backend_api%20authorization_api&state=TW9uIEFwciAzMCAyMDE4IDE2OjM1OjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Abh"]) - ModelState is Valid
2018-04-30 16:35:19.091 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:35:19.092 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:19.093 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 16:35:19.094 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:35:19.094 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 16:35:19.094 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 16:35:19.094 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 16:35:19.095 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:35:19.095 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 16:35:19.095 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 16:35:19.095 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 16:35:19.096 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 16:35:19.097 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:19.098 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:35:19.099 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:19.101 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:35:19.101 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:35:19.102 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:35:19.105 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:35:19.106 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:35:19.108 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:19.110 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('backend_api', 'authorization_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:35:19.111 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:19.112 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:35:19.113 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:35:19.114 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:35:19.114 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:35:19.116 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('backend_api', 'authorization_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:35:19.125 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:35:19.126 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 16:35:19.127 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:35:19.127 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 16:35:19.127 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 16:35:19.128 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 16:35:19.128 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:35:19.128 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 16:35:19.128 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 16:35:19.128 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 16:35:19.128 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 16:35:19.203 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-04-30 16:35:19.671 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 734.8021ms
2018-04-30 16:35:19.674 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1366.5309ms 200 text/html; charset=utf-8
2018-04-30 16:35:19.725 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-04-30 16:35:19.734 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:35:19.738 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf  
2018-04-30 16:35:19.739 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:35:19.740 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Bold.51066f4d1d33630cd761.ttf  
2018-04-30 16:35:19.740 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:35:19.761 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 35.3576ms 404 
2018-04-30 16:35:19.761 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 21.2776ms 404 
2018-04-30 16:35:19.761 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 23.2254ms 404 
2018-04-30 16:35:23.979 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dbackend_api%2520authorization_api%26state%3DTW9uIEFwciAzMCAyMDE4IDE2OjM1OjE3IEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Abh application/x-www-form-urlencoded 618
2018-04-30 16:35:23.979 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:35:24.055 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["Tnf.Rac.OpenIdOAuth2.ViewModels.LoginInputViewModel"]) - ModelState is Valid
2018-04-30 16:35:24.336 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-04-30 16:35:24.346 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 348.4371ms
2018-04-30 16:35:24.347 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 367.2619ms 200 text/html; charset=utf-8
2018-04-30 16:35:24.393 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-04-30 16:35:24.393 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:35:24.393 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.7454ms 404 
2018-04-30 16:35:24.394 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Bold.51066f4d1d33630cd761.ttf  
2018-04-30 16:35:24.394 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:35:24.394 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf  
2018-04-30 16:35:24.394 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:35:24.395 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.7792ms 404 
2018-04-30 16:35:24.396 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.5395ms 404 
2018-04-30 16:36:03.044 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 16:36:03.045 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 16:36:03.046 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:36:03.054 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:03.055 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 16:36:03.055 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:03.057 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:03.058 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 16:36:03.058 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:03.059 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-04-30 16:36:03.059 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:36:03.059 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:03.060 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 15.8684ms 200 application/json; charset=UTF-8
2018-04-30 16:36:03.217 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-04-30 16:36:03.218 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-04-30 16:36:03.218 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.2821ms 200 application/json; charset=UTF-8
2018-04-30 16:36:03.322 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/connect/token application/x-www-form-urlencoded 65
2018-04-30 16:36:03.324 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-04-30 16:36:03.324 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:36:03.326 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:03.327 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 16:36:03.328 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:03.328 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 16:36:03.329 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 16:36:03.330 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 16:36:03.330 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:03.331 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 16:36:03.331 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 16:36:03.331 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 16:36:03.332 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 16:36:03.333 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "js_oidc",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLDEQ5KTFIG6:00000001",
  "TimeStamp": "2018-04-30T19:36:03Z",
  "ProcessId": 4188,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 16:36:03.334 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:03.336 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:36:03.337 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:03.339 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:36:03.340 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:03.340 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:36:03.341 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:36:03.341 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:03.343 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:03.346 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:36:03.349 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:03.352 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:36:03.353 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:03.353 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:36:03.354 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:36:03.354 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:03.355 -03:00 [INFO] IdentityServer4.Validation.TokenRequestValidator Token request validation success
"{
  \"ClientId\": \"js_oidc\",
  \"ClientName\": \"JavaScript OIDC Client\",
  \"GrantType\": \"client_credentials\",
  \"Scopes\": \"authorization_api backend_api\",
  \"Raw\": {
    \"grant_type\": \"client_credentials\",
    \"scope\": \"authorization_api backend_api\"
  }
}"
2018-04-30 16:36:03.358 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "js_oidc",
  "ClientName": "JavaScript OIDC Client",
  "Endpoint": "Token",
  "Scopes": "authorization_api backend_api",
  "GrantType": "client_credentials",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****8G_w"
    }
  ],
  "ActivityId": "0HLDEQ5KTFIG6:00000001",
  "TimeStamp": "2018-04-30T19:36:03Z",
  "ProcessId": 4188,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 16:36:03.359 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 36.5184ms 200 application/json; charset=UTF-8
2018-04-30 16:36:10.441 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 16:36:10.442 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-04-30 16:36:10.444 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:36:10.448 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.452 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 16:36:10.453 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:10.454 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 16:36:10.454 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 16:36:10.454 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 16:36:10.455 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:10.455 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 16:36:10.455 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 16:36:10.455 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 16:36:10.456 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 16:36:10.457 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.458 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:36:10.459 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.462 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:36:10.463 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:10.463 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:36:10.464 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:36:10.465 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:10.467 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:36:10.470 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.471 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:36:10.472 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:10.473 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:36:10.473 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:36:10.474 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:10.475 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api backend_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"authorization_api backend_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:poa\"
  }
}"
2018-04-30 16:36:10.475 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-04-30 16:36:10.476 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 35.0854ms 302 
2018-04-30 16:36:10.485 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dauthorization_api%2520backend_api%26state%3DTW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Apoa  
2018-04-30 16:36:10.493 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa"]) - ModelState is Valid
2018-04-30 16:36:10.495 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:36:10.500 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.503 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 16:36:10.504 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:10.505 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 16:36:10.505 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 16:36:10.506 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 16:36:10.506 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:10.507 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 16:36:10.507 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 16:36:10.507 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 16:36:10.508 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 16:36:10.510 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.520 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:36:10.521 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.524 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:36:10.524 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:10.525 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:36:10.528 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:36:10.532 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:10.535 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.537 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:36:10.540 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.542 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:36:10.543 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:10.544 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:36:10.544 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:36:10.545 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:10.549 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:10.553 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 16:36:10.554 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:10.554 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 16:36:10.554 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 16:36:10.554 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 16:36:10.555 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:10.555 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 16:36:10.555 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 16:36:10.555 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 16:36:10.555 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 16:36:10.556 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-04-30 16:36:10.558 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 69.8006ms
2018-04-30 16:36:10.559 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 74.8187ms 200 text/html; charset=utf-8
2018-04-30 16:36:10.614 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-04-30 16:36:10.614 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:36:10.615 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.6417ms 404 
2018-04-30 16:36:10.621 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf  
2018-04-30 16:36:10.621 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Bold.51066f4d1d33630cd761.ttf  
2018-04-30 16:36:10.621 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:36:10.621 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:36:10.621 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.5916ms 404 
2018-04-30 16:36:10.621 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.5941ms 404 
2018-04-30 16:36:15.243 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dtoken%26client_id%3Dbackend_api%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5055%252Fswagger%252Foauth2-redirect.html%26scope%3Dauthorization_api%2520backend_api%26state%3DTW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%253D%253D%26acr_values%3Dtenant%253Apoa application/x-www-form-urlencoded 620
2018-04-30 16:36:15.243 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-04-30 16:36:15.245 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["Tnf.Rac.OpenIdOAuth2.ViewModels.LoginInputViewModel"]) - ModelState is Valid
2018-04-30 16:36:15.357 -03:00 [INFO] Tnf.Rac.Authorization.ExternalAuthentication.TnfExternalAuthenticationSource ExtenalAuthentication -> TryAuthenticateAsync settings of external url authentication not found for tenant 1
2018-04-30 16:36:15.770 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-04-30 16:36:15.785 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor Executing JsonResult, writing value "{ TargetUrl = /connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa }".
2018-04-30 16:36:15.796 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 553.4111ms
2018-04-30 16:36:15.797 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 554.2813ms 302 application/json; charset=utf-8
2018-04-30 16:36:15.801 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/callback?response_type=token&client_id=backend_api&redirect_uri=http%3A%2F%2Flocalhost%3A5055%2Fswagger%2Foauth2-redirect.html&scope=authorization_api%20backend_api&state=TW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ%3D%3D&acr_values=tenant%3Apoa  
2018-04-30 16:36:15.808 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 16:36:15.810 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-04-30 16:36:15.813 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
2018-04-30 16:36:15.834 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:36:15.845 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:15.847 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-04-30 16:36:15.847 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:15.848 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-04-30 16:36:15.849 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-04-30 16:36:15.850 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-04-30 16:36:15.851 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:15.851 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-04-30 16:36:15.852 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-04-30 16:36:15.852 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-04-30 16:36:15.852 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-04-30 16:36:15.855 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:15.856 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:36:15.857 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:15.859 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:36:15.862 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:15.863 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:36:15.864 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:36:15.864 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:15.867 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:15.870 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('authorization_api', 'backend_api')
ORDER BY \"identityResource\".\"Id\""
2018-04-30 16:36:15.871 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:15.873 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-04-30 16:36:15.874 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:15.875 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-04-30 16:36:15.876 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-04-30 16:36:15.876 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('authorization_api', 'backend_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-04-30 16:36:15.878 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"backend_api\",
  \"ClientName\": \"Backend API\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5055/swagger/oauth2-redirect.html\"
  ],
  \"SubjectId\": \"2\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"authorization_api backend_api\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"AuthenticationContextReferenceClasses\": [
    \"tenant:poa\"
  ],
  \"SessionId\": \"8f81016655d2d506e05ea91382557336\",
  \"Raw\": {
    \"response_type\": \"token\",
    \"client_id\": \"backend_api\",
    \"redirect_uri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
    \"scope\": \"authorization_api backend_api\",
    \"state\": \"TW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
    \"acr_values\": \"tenant:poa\"
  }
}"
2018-04-30 16:36:16.018 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "backend_api",
  "ClientName": "Backend API",
  "RedirectUri": "http://localhost:5055/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "2",
  "Scopes": "authorization_api backend_api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****a6Vg"
    }
  ],
  "ActivityId": "0HLDEQ5KTFIG0:00000007",
  "TimeStamp": "2018-04-30T19:36:16Z",
  "ProcessId": 4188,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-30 16:36:16.026 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"2\",
  \"ClientId\": \"backend_api\",
  \"RedirectUri\": \"http://localhost:5055/swagger/oauth2-redirect.html\",
  \"State\": \"TW9uIEFwciAzMCAyMDE4IDE2OjM2OjEwIEdNVC0wMzAwIChIb3JhIG9maWNpYWwgZG8gQnJhc2lsKQ==\",
  \"Scope\": \"authorization_api backend_api\"
}"
2018-04-30 16:36:16.062 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-04-30 16:36:16.068 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 267.9751ms 302 
2018-04-30 16:36:21.849 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-04-30 16:36:21.850 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-04-30 16:36:21.850 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.2-rtm-10011" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-04-30 16:36:21.851 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-04-30 16:36:21.852 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-04-30 16:36:21.853 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-04-30 16:36:21.855 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], Comma