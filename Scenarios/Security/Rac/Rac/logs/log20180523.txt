2018-05-23 11:28:59.261 -03:00 [INFO] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '"C:\Users\josue.agnese\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-05-23 11:29:04.438 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/  
2018-05-23 11:29:04.513 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone,Tnf.Rac.UserManagement.IsEmailConfirmationRequiredForLogin,Tnf.Rac.UserManagement.TwoFactorLogin.IsEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsEmailProviderEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsSmsProviderEnabled,Tnf.Rac.UserManagement.UserLockOut.IsEnabled,Tnf.Rac.UserManagement.UserLockOut.MaxFailedAccessAttemptsBeforeLockout,Tnf.Rac.UserManagement.UserLockOut.DefaultAccountLockoutSeconds,Tnf.Rac.UserManagement.PasswordComplexity.RequireDigit,Tnf.Rac.UserManagement.PasswordComplexity.RequireLowercase,Tnf.Rac.UserManagement.PasswordComplexity.RequireNonAlphanumeric,Tnf.Rac.UserManagement.PasswordComplexity.RequireUppercase,Tnf.Rac.UserManagement.PasswordComplexity.RequiredLength,TnfExternalAuthentication.IsEnabled,TnfExternalAuthentication.SourceName,TnfExternalAuthentication.GetValidateCredentialAddress,TnfExternalAuthentication.GetUserInfoAddress]
2018-05-23 11:29:05.014 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 3 localization sources.
2018-05-23 11:29:05.023 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRac
2018-05-23 11:29:05.024 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRacIdentity
2018-05-23 11:29:05.076 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-05-23 11:29:05.097 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Host.All.Controllers.HomeController.Index (Tnf.Rac.Host.All)" with arguments (null) - ModelState is Valid
2018-05-23 11:29:05.100 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.VirtualFileResultExecutor Executing FileResult, sending file as ""
2018-05-23 11:29:05.120 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Host.All.Controllers.HomeController.Index (Tnf.Rac.Host.All)" in 33.0945ms
2018-05-23 11:29:05.127 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 692.0126ms 200 text/html
2018-05-23 11:29:05.143 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/inline.bundle.js  
2018-05-23 11:29:05.146 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/polyfills.bundle.js  
2018-05-23 11:29:05.147 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/styles.bundle.js  
2018-05-23 11:29:05.147 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/scripts.bundle.js  
2018-05-23 11:29:05.148 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/styles.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\styles.bundle.js"'
2018-05-23 11:29:05.148 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.bundle.js"'
2018-05-23 11:29:05.149 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/vendor.bundle.js  
2018-05-23 11:29:05.149 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/vendor.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\vendor.bundle.js"'
2018-05-23 11:29:05.151 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.bundle.js"'
2018-05-23 11:29:05.158 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.bundle.js"'
2018-05-23 11:29:05.201 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 54.5774ms 200 application/javascript
2018-05-23 11:29:05.202 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/main.bundle.js  
2018-05-23 11:29:05.204 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.bundle.js"'
2018-05-23 11:29:05.233 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 90.618ms 200 application/javascript
2018-05-23 11:29:05.262 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/inline.bundle.js.map  
2018-05-23 11:29:05.263 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.bundle.js.map"'
2018-05-23 11:29:05.264 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 61.7228ms 200 application/javascript
2018-05-23 11:29:05.267 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 120.4615ms 200 application/javascript
2018-05-23 11:29:05.275 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 12.2724ms 200 text/plain
2018-05-23 11:29:05.275 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 128.1383ms 200 application/javascript
2018-05-23 11:29:05.462 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/polyfills.bundle.js.map  
2018-05-23 11:29:05.462 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.bundle.js.map"'
2018-05-23 11:29:05.466 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/styles.bundle.js.map  
2018-05-23 11:29:05.466 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/styles.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\styles.bundle.js.map"'
2018-05-23 11:29:05.484 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-05-23 11:29:05.487 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:05.500 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'
2018-05-23 11:29:05.539 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 77.0335ms 200 text/plain
2018-05-23 11:29:05.548 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 63.6061ms 200 application/x-font-ttf
2018-05-23 11:29:05.555 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/scripts.bundle.js.map  
2018-05-23 11:29:05.556 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.bundle.js.map"'
2018-05-23 11:29:05.582 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 115.7875ms 200 text/plain
2018-05-23 11:29:05.635 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 79.4379ms 200 text/plain
2018-05-23 11:29:05.898 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 749.3965ms 200 application/javascript
2018-05-23 11:29:08.556 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/vendor.bundle.js.map  
2018-05-23 11:29:08.557 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/vendor.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\vendor.bundle.js.map"'
2018-05-23 11:29:08.560 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/main.bundle.js.map  
2018-05-23 11:29:08.561 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.bundle.js.map"'
2018-05-23 11:29:08.581 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 21.5632ms 200 text/plain
2018-05-23 11:29:08.703 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:29:08.728 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/assets/images/totvs-avatar-default.svg  
2018-05-23 11:29:08.729 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/images/totvs-avatar-default.svg"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\images\totvs-avatar-default.svg"'
2018-05-23 11:29:08.748 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:29:08.761 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 32.9104ms 200 image/svg+xml
2018-05-23 11:29:08.880 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 323.2679ms 200 text/plain
2018-05-23 11:29:09.043 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:09.135 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:09.137 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:09.197 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:09.294 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:09.296 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:09.320 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:09.326 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:29:09.353 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:09.356 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:09.750 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1046.5754ms 200 application/json; charset=UTF-8
2018-05-23 11:29:09.761 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=abe280849323489787e90fac54ea4a33&nonce=64b6bbac4ccf49bd95454e44538cbbd3  
2018-05-23 11:29:09.771 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-05-23 11:29:09.818 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:09.992 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:09.997 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:10.093 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:10.114 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:10.135 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:10.155 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:10.172 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:10.183 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:10.186 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:10.187 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:10.194 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:10.634 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:10.636 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:10.643 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:10.699 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:10.701 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:10.706 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:10.714 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:10.728 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:10.731 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:10.755 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:10.758 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:10.764 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:10.769 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:10.771 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:10.773 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:10.776 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:10.777 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:10.777 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:10.861 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost:5000/auth-callback\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"abe280849323489787e90fac54ea4a33\",
  \"Nonce\": \"64b6bbac4ccf49bd95454e44538cbbd3\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost:5000/auth-callback\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"abe280849323489787e90fac54ea4a33\",
    \"nonce\": \"64b6bbac4ccf49bd95454e44538cbbd3\"
  }
}"
2018-05-23 11:29:10.871 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-05-23 11:29:10.883 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1121.5539ms 302 
2018-05-23 11:29:10.887 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Drac_oidc%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5000%252Fauth-callback%26response_type%3Dcode%2520id_token%2520token%26scope%3Dopenid%2520profile%2520email%2520authorization_api%2520management_api%2520offline_access%26state%3Dabe280849323489787e90fac54ea4a33%26nonce%3D64b6bbac4ccf49bd95454e44538cbbd3  
2018-05-23 11:29:10.982 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=abe280849323489787e90fac54ea4a33&nonce=64b6bbac4ccf49bd95454e44538cbbd3"]) - ModelState is Valid
2018-05-23 11:29:11.004 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:11.007 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:11.011 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:11.012 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:11.012 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:11.013 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:11.013 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:11.013 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:11.014 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:11.014 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:11.014 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:11.015 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:11.016 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:11.019 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:11.020 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:11.022 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:11.027 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:11.027 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:11.028 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:11.029 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:11.030 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:11.033 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:11.036 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:11.037 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:11.041 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:11.043 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:11.045 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:11.045 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:11.046 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:11.047 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:11.554 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:11.555 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:11.556 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:11.558 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:11.559 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:11.559 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:11.559 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:11.560 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:11.560 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:11.560 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:11.560 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:16.882 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-05-23 11:29:17.108 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 6180.9318ms
2018-05-23 11:29:17.111 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 6224.6204ms 200 text/html; charset=utf-8
2018-05-23 11:29:17.131 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/css/slider.css  
2018-05-23 11:29:17.131 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/css/guideline.css  
2018-05-23 11:29:17.132 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline.css"'. Physical path: '"N/A"'
2018-05-23 11:29:17.132 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/css/guideline-login.css  
2018-05-23 11:29:17.132 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.7158ms 200 text/css
2018-05-23 11:29:17.133 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/slider.css"'. Physical path: '"N/A"'
2018-05-23 11:29:17.133 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.3452ms 200 text/css
2018-05-23 11:29:17.134 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline-login.css"'. Physical path: '"N/A"'
2018-05-23 11:29:17.134 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.0183ms 200 text/css
2018-05-23 11:29:17.136 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/img/logo_totvs.png  
2018-05-23 11:29:17.147 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/img/logo_totvs.png"'. Physical path: '"N/A"'
2018-05-23 11:29:17.148 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 12.2474ms 200 image/png
2018-05-23 11:29:17.152 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/svg/logo_grey.svg  
2018-05-23 11:29:17.153 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/logo_grey.svg"'. Physical path: '"N/A"'
2018-05-23 11:29:17.158 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.4867ms 200 image/svg+xml
2018-05-23 11:29:17.528 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/fonts/NunitoSans-Regular.ttf  
2018-05-23 11:29:17.528 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:17.529 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Regular.ttf"'. Physical path: '"N/A"'
2018-05-23 11:29:17.529 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/svg/lock_blue.svg  
2018-05-23 11:29:17.530 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/lock_blue.svg"'. Physical path: '"N/A"'
2018-05-23 11:29:17.530 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/svg/user_blue.svg  
2018-05-23 11:29:17.530 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.0532ms 200 image/svg+xml
2018-05-23 11:29:17.530 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.8586ms 200 application/x-font-ttf
2018-05-23 11:29:17.531 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/fonts/NunitoSans-ExtraLight.ttf  
2018-05-23 11:29:17.531 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/user_blue.svg"'. Physical path: '"N/A"'
2018-05-23 11:29:17.531 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:17.531 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.0902ms 200 image/svg+xml
2018-05-23 11:29:17.531 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/svg/x_gray.svg  
2018-05-23 11:29:17.533 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/x_gray.svg"'. Physical path: '"N/A"'
2018-05-23 11:29:17.533 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.3688ms 200 image/svg+xml
2018-05-23 11:29:17.533 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/fonts/NunitoSans-Bold.ttf  
2018-05-23 11:29:17.533 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:17.534 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-ExtraLight.ttf"'. Physical path: '"N/A"'
2018-05-23 11:29:17.534 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Bold.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\fonts\NunitoSans-Bold.ttf"'
2018-05-23 11:29:17.535 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.8826ms 200 application/x-font-ttf
2018-05-23 11:29:17.561 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 27.6815ms 200 application/x-font-ttf
2018-05-23 11:29:23.683 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Drac_oidc%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5000%252Fauth-callback%26response_type%3Dcode%2520id_token%2520token%26scope%3Dopenid%2520profile%2520email%2520authorization_api%2520management_api%2520offline_access%26state%3Dabe280849323489787e90fac54ea4a33%26nonce%3D64b6bbac4ccf49bd95454e44538cbbd3 application/x-www-form-urlencoded 629
2018-05-23 11:29:23.684 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:23.732 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["Tnf.Rac.OpenIdOAuth2.ViewModels.LoginInputViewModel"]) - ModelState is Valid
2018-05-23 11:29:23.823 -03:00 [INFO] Tnf.Rac.Authorization.ExternalAuthentication.TnfExternalAuthenticationSource ExtenalAuthentication -> TryAuthenticateAsync settings of external url authentication not found for tenant 
2018-05-23 11:29:24.370 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-05-23 11:29:24.375 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor Executing JsonResult, writing value "{ TargetUrl = /connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=abe280849323489787e90fac54ea4a33&nonce=64b6bbac4ccf49bd95454e44538cbbd3 }".
2018-05-23 11:29:24.379 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 682.2815ms
2018-05-23 11:29:24.380 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 696.6355ms 302 application/json; charset=utf-8
2018-05-23 11:29:24.382 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=abe280849323489787e90fac54ea4a33&nonce=64b6bbac4ccf49bd95454e44538cbbd3  
2018-05-23 11:29:24.390 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:24.390 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:24.392 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
2018-05-23 11:29:24.407 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:24.418 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:24.420 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:24.422 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:24.423 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:24.424 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:24.425 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:24.426 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:24.428 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:24.428 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:24.429 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:24.429 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:24.431 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:24.433 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:24.434 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:24.437 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:24.441 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:24.442 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:24.443 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:24.443 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:24.444 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:24.445 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:24.447 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:24.448 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:24.450 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:24.452 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:24.453 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:24.453 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:24.455 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:24.459 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:24.466 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost:5000/auth-callback\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"abe280849323489787e90fac54ea4a33\",
  \"Nonce\": \"64b6bbac4ccf49bd95454e44538cbbd3\",
  \"SessionId\": \"3de6d028200bf7881bd1463803bc6357\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost:5000/auth-callback\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"abe280849323489787e90fac54ea4a33\",
    \"nonce\": \"64b6bbac4ccf49bd95454e44538cbbd3\"
  }
}"
2018-05-23 11:29:24.684 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLitePersistedGrantDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:24.698 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:24.699 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__token_Key_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Key\", \"x\".\"ClientId\", \"x\".\"CreationTime\", \"x\".\"Data\", \"x\".\"Expiration\", \"x\".\"SubjectId\", \"x\".\"Type\"
FROM \"PersistedGrants\" AS \"x\"
WHERE \"x\".\"Key\" = @__token_Key_0
LIMIT 2"
2018-05-23 11:29:24.743 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:24.747 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"PersistedGrants\" (\"Key\", \"ClientId\", \"CreationTime\", \"Data\", \"Expiration\", \"SubjectId\", \"Type\")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);"
2018-05-23 11:29:24.899 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "rac_oidc",
  "ClientName": "OIDC Client for RAC",
  "RedirectUri": "http://localhost:5000/auth-callback",
  "Endpoint": "Authorize",
  "SubjectId": "1",
  "Scopes": "openid profile email authorization_api management_api offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****M-gw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****87d8"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****IHbw"
    }
  ],
  "ActivityId": "0HLE0N64H1V1N:00000004",
  "TimeStamp": "2018-05-23T14:29:24Z",
  "ProcessId": 8856,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-05-23 11:29:24.906 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"rac_oidc\",
  \"RedirectUri\": \"http://localhost:5000/auth-callback\",
  \"State\": \"abe280849323489787e90fac54ea4a33\",
  \"Scope\": \"openid profile email authorization_api management_api offline_access\"
}"
2018-05-23 11:29:24.928 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-05-23 11:29:24.932 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 549.984ms 302 
2018-05-23 11:29:24.935 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/auth-callback  
2018-05-23 11:29:24.936 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:24.937 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:24.980 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Host.All.Controllers.HomeController.Index (Tnf.Rac.Host.All)" with arguments (null) - ModelState is Valid
2018-05-23 11:29:24.981 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.VirtualFileResultExecutor Executing FileResult, sending file as ""
2018-05-23 11:29:24.982 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Host.All.Controllers.HomeController.Index (Tnf.Rac.Host.All)" in 1.6019ms
2018-05-23 11:29:24.982 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 47.068ms 404 text/html
2018-05-23 11:29:25.003 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/inline.bundle.js  
2018-05-23 11:29:25.005 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/polyfills.bundle.js  
2018-05-23 11:29:25.005 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.005 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.006 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.bundle.js"'
2018-05-23 11:29:25.006 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.006 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/styles.bundle.js  
2018-05-23 11:29:25.006 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.006 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.bundle.js"'
2018-05-23 11:29:25.007 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/scripts.bundle.js  
2018-05-23 11:29:25.007 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.007 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.007 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/styles.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\styles.bundle.js"'
2018-05-23 11:29:25.008 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.008 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.008 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/vendor.bundle.js  
2018-05-23 11:29:25.009 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.bundle.js"'
2018-05-23 11:29:25.009 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/main.bundle.js  
2018-05-23 11:29:25.010 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.010 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.010 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.010 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/vendor.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\vendor.bundle.js"'
2018-05-23 11:29:25.010 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.010 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.bundle.js"'
2018-05-23 11:29:25.014 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.5496ms 200 application/javascript
2018-05-23 11:29:25.027 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 20.9225ms 200 application/javascript
2018-05-23 11:29:25.026 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 16.3198ms 200 application/javascript
2018-05-23 11:29:25.042 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 34.9232ms 200 application/javascript
2018-05-23 11:29:25.045 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 39.7519ms 200 application/javascript
2018-05-23 11:29:25.084 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/inline.bundle.js.map  
2018-05-23 11:29:25.085 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.091 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.092 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.bundle.js.map"'
2018-05-23 11:29:25.092 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 8.2163ms 200 text/plain
2018-05-23 11:29:25.245 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/polyfills.bundle.js.map  
2018-05-23 11:29:25.245 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.245 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.246 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.bundle.js.map"'
2018-05-23 11:29:25.246 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/styles.bundle.js.map  
2018-05-23 11:29:25.247 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.247 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.247 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/scripts.bundle.js.map  
2018-05-23 11:29:25.248 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/styles.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\styles.bundle.js.map"'
2018-05-23 11:29:25.248 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.248 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-05-23 11:29:25.248 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.248 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:25.249 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.bundle.js.map"'
2018-05-23 11:29:25.249 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.249 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:25.249 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'
2018-05-23 11:29:25.268 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 23.8732ms 200 text/plain
2018-05-23 11:29:25.269 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 15.9467ms 200 application/x-font-ttf
2018-05-23 11:29:25.269 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 22.7864ms 200 text/plain
2018-05-23 11:29:25.277 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 29.4343ms 200 text/plain
2018-05-23 11:29:25.425 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 415.9115ms 200 application/javascript
2018-05-23 11:29:27.664 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/vendor.bundle.js.map  
2018-05-23 11:29:27.664 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/main.bundle.js.map  
2018-05-23 11:29:27.665 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.665 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.665 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.665 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.665 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/vendor.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\vendor.bundle.js.map"'
2018-05-23 11:29:27.665 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.bundle.js.map"'
2018-05-23 11:29:27.667 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.9045ms 200 text/plain
2018-05-23 11:29:27.813 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:29:27.815 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.815 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.818 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:29:27.819 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:27.821 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:27.823 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:27.823 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:27.824 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:27.826 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:27.826 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:27.826 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:29:27.827 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:27.827 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:27.829 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 15.1875ms 200 application/json; charset=UTF-8
2018-05-23 11:29:27.834 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/assets/images/totvs-avatar-default.svg  
2018-05-23 11:29:27.835 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.835 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.835 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/images/totvs-avatar-default.svg"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\images\totvs-avatar-default.svg"'
2018-05-23 11:29:27.836 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.2013ms 200 image/svg+xml
2018-05-23 11:29:27.852 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-05-23 11:29:27.854 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.854 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:27.856 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-05-23 11:29:27.895 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 42.9879ms 200 application/json; charset=UTF-8
2018-05-23 11:29:27.963 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 299.255ms 200 text/plain
2018-05-23 11:29:28.065 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo  
2018-05-23 11:29:28.066 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:28.066 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:28.070 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-05-23 11:29:28.234 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:28.237 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:28.241 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:28.241 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:28.242 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:28.243 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:28.244 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:28.244 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:28.244 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:28.245 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:28.246 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:28.247 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:28.257 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:28.259 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:28.260 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:28.260 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:28.260 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:28.261 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:28.261 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:28.262 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:28.262 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:28.263 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:28.264 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:28.317 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:28.319 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:28.320 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:28.330 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:28.332 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:28.333 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:28.335 -03:00 [INFO] IdentityServer4.ResponseHandling.UserInfoResponseGenerator Profile service returned to the following claim types: "sub preferred_username name email email_verified"
2018-05-23 11:29:28.345 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 279.5367ms 200 application/json; charset=UTF-8
2018-05-23 11:29:28.362 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession  
2018-05-23 11:29:28.363 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:28.363 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:28.364 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession"
2018-05-23 11:29:28.377 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 14.9823ms 200 text/html; charset=UTF-8
2018-05-23 11:29:28.384 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/api/Permissions application/json 83
2018-05-23 11:29:28.385 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:28.389 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:28.390 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:28.553 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:29:28.555 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:29:28.555 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:28.556 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:28.558 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:28.558 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:28.560 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:28.561 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:28.562 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:28.562 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:29:28.562 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:28.562 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:28.564 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.8726ms 200 application/json; charset=UTF-8
2018-05-23 11:29:28.632 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-05-23 11:29:28.633 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-05-23 11:29:28.634 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.9492ms 200 application/json; charset=UTF-8
2018-05-23 11:29:28.690 -03:00 [INFO] Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler Successfully validated the token.
2018-05-23 11:29:28.691 -03:00 [INFO] Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was successfully authenticated.
2018-05-23 11:29:28.692 -03:00 [INFO] IdentityServer4.AccessTokenValidation.IdentityServerAuthenticationHandler AuthenticationScheme: "Bearer" was successfully authenticated.
2018-05-23 11:29:28.700 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "1".
2018-05-23 11:29:28.716 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Host.Authorization.Controllers.PermissionsController.GetGrantedByPermissions (Tnf.Rac.Host.Authorization)" with arguments (["System.Collections.Generic.List`1[System.String]"]) - ModelState is Valid
2018-05-23 11:29:28.819 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:29:28.826 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Host.Authorization.Controllers.PermissionsController.GetGrantedByPermissions (Tnf.Rac.Host.Authorization)" in 423.3076ms
2018-05-23 11:29:28.828 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 443.8899ms 200 application/json; charset=utf-8
2018-05-23 11:29:28.847 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Bold.51066f4d1d33630cd761.ttf  
2018-05-23 11:29:28.847 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:28.848 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:28.848 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:28.848 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/NunitoSans-Bold.51066f4d1d33630cd761.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\NunitoSans-Bold.51066f4d1d33630cd761.ttf"'
2018-05-23 11:29:28.864 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 17.2408ms 200 application/x-font-ttf
2018-05-23 11:29:37.248 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/common.chunk.js  
2018-05-23 11:29:37.248 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.248 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.249 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/common.chunk.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\common.chunk.js"'
2018-05-23 11:29:37.249 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/tenant.module.chunk.js  
2018-05-23 11:29:37.249 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.249 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.250 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/tenant.module.chunk.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\tenant.module.chunk.js"'
2018-05-23 11:29:37.273 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 23.7166ms 200 application/javascript
2018-05-23 11:29:37.281 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 32.8159ms 200 application/javascript
2018-05-23 11:29:37.293 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/tenant.module.chunk.js.map  
2018-05-23 11:29:37.294 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.294 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.295 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/tenant.module.chunk.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\tenant.module.chunk.js.map"'
2018-05-23 11:29:37.309 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 15.2595ms 200 text/plain
2018-05-23 11:29:37.382 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:29:37.383 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.383 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.383 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:29:37.384 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:37.385 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:37.388 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:37.388 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:37.390 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:37.391 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:37.391 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:37.392 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:29:37.392 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:37.393 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:37.394 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 12.1853ms 200 application/json; charset=UTF-8
2018-05-23 11:29:37.420 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/tenant?page=1&pageSize=20  
2018-05-23 11:29:37.421 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.421 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.426 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/TotvsIcon.683aa55aa3feb2d437b7.ttf  
2018-05-23 11:29:37.426 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:37.427 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.427 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.427 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/TotvsIcon.683aa55aa3feb2d437b7.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\TotvsIcon.683aa55aa3feb2d437b7.ttf"'
2018-05-23 11:29:37.430 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf  
2018-05-23 11:29:37.431 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:37.432 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "admin".
2018-05-23 11:29:37.438 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.438 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.440 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf"'
2018-05-23 11:29:37.441 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" with arguments (["Tnf.Rac.Dtos.TenantQueryDto"]) - ModelState is Valid
2018-05-23 11:29:37.459 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 32.9041ms 200 application/x-font-ttf
2018-05-23 11:29:37.481 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 50.4405ms 200 application/x-font-ttf
2018-05-23 11:29:37.508 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/common.chunk.js.map  
2018-05-23 11:29:37.531 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.532 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.532 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/common.chunk.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\common.chunk.js.map"'
2018-05-23 11:29:37.533 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession  
2018-05-23 11:29:37.539 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.539 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:37.539 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession"
2018-05-23 11:29:37.540 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 6.7342ms 200 text/html; charset=UTF-8
2018-05-23 11:29:37.596 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 87.9441ms 200 text/plain
2018-05-23 11:29:37.634 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:29:37.660 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" in 228.3289ms
2018-05-23 11:29:37.660 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 240.186ms 200 application/json; charset=utf-8
2018-05-23 11:29:38.699 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/organizationUnit.module.chunk.js  
2018-05-23 11:29:38.700 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.700 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.700 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/organizationUnit.module.chunk.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\organizationUnit.module.chunk.js"'
2018-05-23 11:29:38.728 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 28.9847ms 200 application/javascript
2018-05-23 11:29:38.811 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:29:38.812 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.812 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.813 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:29:38.813 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:38.815 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:38.816 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:38.816 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:38.818 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:38.821 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:38.821 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:38.821 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:29:38.822 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:38.822 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:38.824 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 12.3211ms 200 application/json; charset=UTF-8
2018-05-23 11:29:38.839 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/organizationUnit?page=1&pageSize=20  
2018-05-23 11:29:38.840 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.840 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.848 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "admin".
2018-05-23 11:29:38.850 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/organizationUnit.module.chunk.js.map  
2018-05-23 11:29:38.851 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.851 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.851 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/organizationUnit.module.chunk.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\organizationUnit.module.chunk.js.map"'
2018-05-23 11:29:38.851 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Management.Api.Controllers.OrganizationUnitController.GetAllAsync (Tnf.Rac.Management.Api)" with arguments (["Tnf.Rac.Dtos.OrganizationQueryDto"]) - ModelState is Valid
2018-05-23 11:29:38.892 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession  
2018-05-23 11:29:38.893 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.893 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:38.893 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession"
2018-05-23 11:29:38.893 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.4947ms 200 text/html; charset=UTF-8
2018-05-23 11:29:38.913 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 62.8907ms 200 text/plain
2018-05-23 11:29:39.003 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:29:39.013 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Management.Api.Controllers.OrganizationUnitController.GetAllAsync (Tnf.Rac.Management.Api)" in 165.0693ms
2018-05-23 11:29:39.014 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 175.114ms 200 application/json; charset=utf-8
2018-05-23 11:29:39.607 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/tenant?page=1&pageSize=20  
2018-05-23 11:29:39.608 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:39.608 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:39.608 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "admin".
2018-05-23 11:29:39.609 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" with arguments (["Tnf.Rac.Dtos.TenantQueryDto"]) - ModelState is Valid
2018-05-23 11:29:39.614 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:29:39.614 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" in 5.9772ms
2018-05-23 11:29:39.614 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 7.3654ms 200 application/json; charset=utf-8
2018-05-23 11:29:41.846 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6ImE0M2VhYmJkMzRjZTYwNzE5YzU0MWFhNzE4ZWU1NGE3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjcwODU3NjQsImV4cCI6MTUyNzA4NTg0NCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoicmFjX29pZGMiLCJub25jZSI6IjY0YjZiYmFjNGNjZjQ5YmQ5NTQ1NGU0NDUzOGNiYmQzIiwiaWF0IjoxNTI3MDg1NzY0LCJhdF9oYXNoIjoiQzdOcGVqYkdFd0Jzbkp1MmRLbXZ3USIsImNfaGFzaCI6InF1QlhSQm1vU0s1VzhtWFVYbzhkS1EiLCJzaWQiOiIzZGU2ZDAyODIwMGJmNzg4MWJkMTQ2MzgwM2JjNjM1NyIsInN1YiI6IjEiLCJhdXRoX3RpbWUiOjE1MjcwODU3NjQsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.FDy-40jjTGyPdsip06J-Nwwdr_a8DQ7q7TVEL9jCuDcL4tXD43cdgyT6BMvAocFz9vM22d-WPmp70xBv6igKxuTh5nXaWWkyPIuo6AaCeKmAApkoEnAPVbTCWnWp5i5XLJDlsgtNuf8hcbTq4-JLlPV3CrZdDaRiC1cyQtYZ_KHZmrHU3d78TB7TW03mOQMcXL6H3RCnDXMx0XgdkH8fMBkca7uTZGUoWrQfFhTUyqwjE897-1Aex09fcchUr8-yU4KCxRaALvvl_lPpi62hTT37xAxED2Qy9hsZlSN7G8YJzpmBbeFtXaAYA3yu0lK1GldDStEZ0cvQ02pvucM-gw&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A5000%2F  
2018-05-23 11:29:41.848 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:41.848 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:41.853 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession"
2018-05-23 11:29:41.879 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:41.880 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:41.882 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:41.883 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:41.883 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:41.883 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:41.884 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:41.887 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:41.888 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:41.888 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:41.888 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:41.889 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:41.897 -03:00 [INFO] IdentityServer4.Validation.EndSessionRequestValidator End session request validation success
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"SubjectId\": \"1\",
  \"PostLogOutUri\": \"http://localhost:5000/\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImE0M2VhYmJkMzRjZTYwNzE5YzU0MWFhNzE4ZWU1NGE3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjcwODU3NjQsImV4cCI6MTUyNzA4NTg0NCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoicmFjX29pZGMiLCJub25jZSI6IjY0YjZiYmFjNGNjZjQ5YmQ5NTQ1NGU0NDUzOGNiYmQzIiwiaWF0IjoxNTI3MDg1NzY0LCJhdF9oYXNoIjoiQzdOcGVqYkdFd0Jzbkp1MmRLbXZ3USIsImNfaGFzaCI6InF1QlhSQm1vU0s1VzhtWFVYbzhkS1EiLCJzaWQiOiIzZGU2ZDAyODIwMGJmNzg4MWJkMTQ2MzgwM2JjNjM1NyIsInN1YiI6IjEiLCJhdXRoX3RpbWUiOjE1MjcwODU3NjQsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.FDy-40jjTGyPdsip06J-Nwwdr_a8DQ7q7TVEL9jCuDcL4tXD43cdgyT6BMvAocFz9vM22d-WPmp70xBv6igKxuTh5nXaWWkyPIuo6AaCeKmAApkoEnAPVbTCWnWp5i5XLJDlsgtNuf8hcbTq4-JLlPV3CrZdDaRiC1cyQtYZ_KHZmrHU3d78TB7TW03mOQMcXL6H3RCnDXMx0XgdkH8fMBkca7uTZGUoWrQfFhTUyqwjE897-1Aex09fcchUr8-yU4KCxRaALvvl_lPpi62hTT37xAxED2Qy9hsZlSN7G8YJzpmBbeFtXaAYA3yu0lK1GldDStEZ0cvQ02pvucM-gw\",
    \"post_logout_redirect_uri\": \"http://localhost:5000/\"
  }
}"
2018-05-23 11:29:41.914 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 67.4712ms 302 
2018-05-23 11:29:41.917 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/account/logout?logoutId=CfDJ8JsPHXq4pSBEqnKUROzUoPpso4RBMzhDCQXzOrL0C_VL9yq4lRWSPi72NlwrYO75O--QQ0BDgaOA_DVtejQ9ndWgBt19yzabdBQll20ZnVmHLt_DhiAl1fMM8w6cqh5KgvZzU8vxJV7R0ma9JvEjf2RWFcGSckNYMt8Z2cD7Zd5Fm82IZY_xZh8KTHY_dsGwb434q_YJ7pXfuZbkibc5cbhLNJRfEjOd3iiIXO0esOe6f1Vsl_maZCN3MK_Vu3vkS2z4ZRFoD6jUeXjJYeOcJOWiiAMqLyK_4wPaAas-MOdopYc8fvClXCbWnKK4ZNugJ_D4vBa5RAUHYJrwiJo0MIIAQQRLxIaL79-NPrNth7VcjV2wndDtOVFprfQ3KsYdrxtDGiqZld500g04Z6K-lKIT-G-q1nshN6z_xiYgbb2CiNTlJXqs_J2VsSA69KQjlA  
2018-05-23 11:29:41.918 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:41.918 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:41.927 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Logout (Tnf.Rac.OpenIdOAuth2)" with arguments (["", "CfDJ8JsPHXq4pSBEqnKUROzUoPpso4RBMzhDCQXzOrL0C_VL9yq4lRWSPi72NlwrYO75O--QQ0BDgaOA_DVtejQ9ndWgBt19yzabdBQll20ZnVmHLt_DhiAl1fMM8w6cqh5KgvZzU8vxJV7R0ma9JvEjf2RWFcGSckNYMt8Z2cD7Zd5Fm82IZY_xZh8KTHY_dsGwb434q_YJ7pXfuZbkibc5cbhLNJRfEjOd3iiIXO0esOe6f1Vsl_maZCN3MK_Vu3vkS2z4ZRFoD6jUeXjJYeOcJOWiiAMqLyK_4wPaAas-MOdopYc8fvClXCbWnKK4ZNugJ_D4vBa5RAUHYJrwiJo0MIIAQQRLxIaL79-NPrNth7VcjV2wndDtOVFprfQ3KsYdrxtDGiqZld500g04Z6K-lKIT-G-q1nshN6z_xiYgbb2CiNTlJXqs_J2VsSA69KQjlA"]) - ModelState is Valid
2018-05-23 11:29:41.997 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed out.
2018-05-23 11:29:41.998 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.External" signed out.
2018-05-23 11:29:41.998 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.TwoFactorUserId" signed out.
2018-05-23 11:29:42.000 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.RedirectResultExecutor Executing RedirectResult, redirecting to "http://localhost:5000/".
2018-05-23 11:29:42.001 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Logout (Tnf.Rac.OpenIdOAuth2)" in 74.7189ms
2018-05-23 11:29:42.003 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 84.3386ms 301 
2018-05-23 11:29:42.005 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/  
2018-05-23 11:29:42.006 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Host.All.Controllers.HomeController.Index (Tnf.Rac.Host.All)" with arguments (null) - ModelState is Valid
2018-05-23 11:29:42.006 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.VirtualFileResultExecutor Executing FileResult, sending file as ""
2018-05-23 11:29:42.006 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Host.All.Controllers.HomeController.Index (Tnf.Rac.Host.All)" in 0.6935ms
2018-05-23 11:29:42.006 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.3124ms 200 text/html
2018-05-23 11:29:42.041 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/inline.bundle.js  
2018-05-23 11:29:42.042 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.bundle.js"'
2018-05-23 11:29:42.043 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/polyfills.bundle.js  
2018-05-23 11:29:42.043 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/styles.bundle.js  
2018-05-23 11:29:42.043 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/styles.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\styles.bundle.js"'
2018-05-23 11:29:42.043 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.bundle.js"'
2018-05-23 11:29:42.043 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/scripts.bundle.js  
2018-05-23 11:29:42.043 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/vendor.bundle.js  
2018-05-23 11:29:42.044 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.bundle.js"'
2018-05-23 11:29:42.044 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/vendor.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\vendor.bundle.js"'
2018-05-23 11:29:42.044 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/main.bundle.js  
2018-05-23 11:29:42.044 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.bundle.js"'
2018-05-23 11:29:42.046 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.2568ms 200 application/javascript
2018-05-23 11:29:42.046 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.3586ms 200 application/javascript
2018-05-23 11:29:42.057 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 13.3169ms 200 application/javascript
2018-05-23 11:29:42.059 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 16.012ms 200 application/javascript
2018-05-23 11:29:42.060 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 16.1251ms 200 application/javascript
2018-05-23 11:29:42.180 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/inline.bundle.js.map  
2018-05-23 11:29:42.180 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.bundle.js.map"'
2018-05-23 11:29:42.182 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.8713ms 200 text/plain
2018-05-23 11:29:42.337 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/polyfills.bundle.js.map  
2018-05-23 11:29:42.338 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.bundle.js.map"'
2018-05-23 11:29:42.339 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/styles.bundle.js.map  
2018-05-23 11:29:42.340 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/styles.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\styles.bundle.js.map"'
2018-05-23 11:29:42.340 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/scripts.bundle.js.map  
2018-05-23 11:29:42.341 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.bundle.js.map"'
2018-05-23 11:29:42.343 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.5861ms 200 text/plain
2018-05-23 11:29:42.345 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 7.0008ms 200 text/plain
2018-05-23 11:29:42.357 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 16.6326ms 200 text/plain
2018-05-23 11:29:42.381 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-05-23 11:29:42.382 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:42.387 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'
2018-05-23 11:29:42.397 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 15.7362ms 200 application/x-font-ttf
2018-05-23 11:29:42.532 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 488.5951ms 200 application/javascript
2018-05-23 11:29:44.855 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/vendor.bundle.js.map  
2018-05-23 11:29:44.855 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/main.bundle.js.map  
2018-05-23 11:29:44.855 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.bundle.js.map"'
2018-05-23 11:29:44.855 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/vendor.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\vendor.bundle.js.map"'
2018-05-23 11:29:44.859 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.5653ms 200 text/plain
2018-05-23 11:29:44.992 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:29:44.994 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:29:44.995 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:44.998 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:44.999 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:45.000 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.001 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/assets/images/totvs-avatar-default.svg  
2018-05-23 11:29:45.002 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/images/totvs-avatar-default.svg"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\images\totvs-avatar-default.svg"'
2018-05-23 11:29:45.002 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.4009ms 200 image/svg+xml
2018-05-23 11:29:45.004 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.006 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:45.007 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.007 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:29:45.008 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:45.008 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:45.013 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 20.9331ms 200 application/json; charset=UTF-8
2018-05-23 11:29:45.162 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 307.306ms 200 text/plain
2018-05-23 11:29:45.296 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=91587cd94c4e4edbab1ddb52de582a81&nonce=c4d01294df5d468eaf4cf134437a98e5  
2018-05-23 11:29:45.297 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-05-23 11:29:45.298 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:45.301 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.305 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:45.306 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.306 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:45.306 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:45.307 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:45.307 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:45.307 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:45.307 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:45.308 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:45.308 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:45.309 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.311 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:45.312 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.314 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.315 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:45.316 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.316 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:45.317 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:45.319 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:45.321 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.322 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:45.323 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.324 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.326 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:45.326 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.327 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:45.327 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:45.328 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:45.329 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost:5000/auth-callback\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"91587cd94c4e4edbab1ddb52de582a81\",
  \"Nonce\": \"c4d01294df5d468eaf4cf134437a98e5\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost:5000/auth-callback\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"91587cd94c4e4edbab1ddb52de582a81\",
    \"nonce\": \"c4d01294df5d468eaf4cf134437a98e5\"
  }
}"
2018-05-23 11:29:45.329 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-05-23 11:29:45.329 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 32.9002ms 302 
2018-05-23 11:29:45.396 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Drac_oidc%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5000%252Fauth-callback%26response_type%3Dcode%2520id_token%2520token%26scope%3Dopenid%2520profile%2520email%2520authorization_api%2520management_api%2520offline_access%26state%3D91587cd94c4e4edbab1ddb52de582a81%26nonce%3Dc4d01294df5d468eaf4cf134437a98e5  
2018-05-23 11:29:45.399 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=91587cd94c4e4edbab1ddb52de582a81&nonce=c4d01294df5d468eaf4cf134437a98e5"]) - ModelState is Valid
2018-05-23 11:29:45.400 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:45.403 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.409 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:45.410 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.411 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:45.412 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:45.412 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:45.413 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:45.414 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:45.414 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:45.414 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:45.415 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:45.416 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.420 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:45.421 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.424 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.427 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:45.428 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.428 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:45.429 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:45.430 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:45.431 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.433 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:45.439 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.442 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.443 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:45.444 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.445 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:45.446 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:45.447 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:45.450 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:45.456 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:45.457 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:45.458 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:45.462 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:45.462 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:45.462 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:45.462 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:45.462 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:45.463 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:45.463 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:45.464 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-05-23 11:29:45.466 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 69.4014ms
2018-05-23 11:29:45.468 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 71.9381ms 200 text/html; charset=utf-8
2018-05-23 11:29:45.502 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/css/slider.css  
2018-05-23 11:29:45.503 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/slider.css"'. Physical path: '"N/A"'
2018-05-23 11:29:45.503 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.3057ms 200 text/css
2018-05-23 11:29:45.503 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/css/guideline.css  
2018-05-23 11:29:45.505 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline.css"'. Physical path: '"N/A"'
2018-05-23 11:29:45.505 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.0483ms 200 text/css
2018-05-23 11:29:45.506 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/css/guideline-login.css  
2018-05-23 11:29:45.507 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline-login.css"'. Physical path: '"N/A"'
2018-05-23 11:29:45.507 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.1854ms 200 text/css
2018-05-23 11:29:45.511 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/img/logo_totvs.png  
2018-05-23 11:29:45.512 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/img/logo_totvs.png"'. Physical path: '"N/A"'
2018-05-23 11:29:45.520 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 6.4433ms 200 image/png
2018-05-23 11:29:45.520 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/svg/logo_grey.svg  
2018-05-23 11:29:45.521 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/logo_grey.svg"'. Physical path: '"N/A"'
2018-05-23 11:29:45.522 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.4164ms 200 image/svg+xml
2018-05-23 11:29:45.909 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/fonts/NunitoSans-Regular.ttf  
2018-05-23 11:29:45.909 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:45.910 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Regular.ttf"'. Physical path: '"N/A"'
2018-05-23 11:29:45.911 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/svg/lock_blue.svg  
2018-05-23 11:29:45.912 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/lock_blue.svg"'. Physical path: '"N/A"'
2018-05-23 11:29:45.912 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.3551ms 200 image/svg+xml
2018-05-23 11:29:45.912 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.2017ms 200 application/x-font-ttf
2018-05-23 11:29:45.913 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/svg/user_blue.svg  
2018-05-23 11:29:45.913 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/user_blue.svg"'. Physical path: '"N/A"'
2018-05-23 11:29:45.913 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.5285ms 200 image/svg+xml
2018-05-23 11:29:45.913 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/fonts/NunitoSans-ExtraLight.ttf  
2018-05-23 11:29:45.913 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:45.914 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-ExtraLight.ttf"'. Physical path: '"N/A"'
2018-05-23 11:29:45.914 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/svg/x_gray.svg  
2018-05-23 11:29:45.914 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/fonts/NunitoSans-Bold.ttf  
2018-05-23 11:29:45.914 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:45.914 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Bold.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\fonts\NunitoSans-Bold.ttf"'
2018-05-23 11:29:45.914 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/x_gray.svg"'. Physical path: '"N/A"'
2018-05-23 11:29:45.914 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.6389ms 200 image/svg+xml
2018-05-23 11:29:45.914 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.2158ms 200 application/x-font-ttf
2018-05-23 11:29:45.916 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.9792ms 200 application/x-font-ttf
2018-05-23 11:29:51.700 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Drac_oidc%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5000%252Fauth-callback%26response_type%3Dcode%2520id_token%2520token%26scope%3Dopenid%2520profile%2520email%2520authorization_api%2520management_api%2520offline_access%26state%3D91587cd94c4e4edbab1ddb52de582a81%26nonce%3Dc4d01294df5d468eaf4cf134437a98e5 application/x-www-form-urlencoded 629
2018-05-23 11:29:51.700 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:51.704 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["Tnf.Rac.OpenIdOAuth2.ViewModels.LoginInputViewModel"]) - ModelState is Valid
2018-05-23 11:29:51.704 -03:00 [INFO] Tnf.Rac.Authorization.ExternalAuthentication.TnfExternalAuthenticationSource ExtenalAuthentication -> TryAuthenticateAsync settings of external url authentication not found for tenant 
2018-05-23 11:29:51.760 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-05-23 11:29:51.760 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor Executing JsonResult, writing value "{ TargetUrl = /connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=91587cd94c4e4edbab1ddb52de582a81&nonce=c4d01294df5d468eaf4cf134437a98e5 }".
2018-05-23 11:29:51.760 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 59.6871ms
2018-05-23 11:29:51.761 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 61.7577ms 302 application/json; charset=utf-8
2018-05-23 11:29:51.763 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=91587cd94c4e4edbab1ddb52de582a81&nonce=c4d01294df5d468eaf4cf134437a98e5  
2018-05-23 11:29:51.764 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.764 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.765 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
2018-05-23 11:29:51.766 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:51.780 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:51.782 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:51.782 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:51.783 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:51.784 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:51.785 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:51.786 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:51.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:51.788 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:51.789 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:51.789 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:51.791 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:51.793 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:51.793 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:51.796 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:51.798 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:51.799 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:51.799 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:51.800 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:51.802 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:51.804 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:51.806 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:51.807 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:51.808 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:51.810 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:29:51.810 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:51.811 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:29:51.812 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:51.812 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:51.813 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost:5000/auth-callback\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"91587cd94c4e4edbab1ddb52de582a81\",
  \"Nonce\": \"c4d01294df5d468eaf4cf134437a98e5\",
  \"SessionId\": \"4b9e5c7a4fa6520a3662ea474528c47e\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost:5000/auth-callback\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"91587cd94c4e4edbab1ddb52de582a81\",
    \"nonce\": \"c4d01294df5d468eaf4cf134437a98e5\"
  }
}"
2018-05-23 11:29:51.839 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLitePersistedGrantDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:51.840 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:51.842 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__token_Key_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Key\", \"x\".\"ClientId\", \"x\".\"CreationTime\", \"x\".\"Data\", \"x\".\"Expiration\", \"x\".\"SubjectId\", \"x\".\"Type\"
FROM \"PersistedGrants\" AS \"x\"
WHERE \"x\".\"Key\" = @__token_Key_0
LIMIT 2"
2018-05-23 11:29:51.843 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:51.847 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"PersistedGrants\" (\"Key\", \"ClientId\", \"CreationTime\", \"Data\", \"Expiration\", \"SubjectId\", \"Type\")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);"
2018-05-23 11:29:51.859 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "rac_oidc",
  "ClientName": "OIDC Client for RAC",
  "RedirectUri": "http://localhost:5000/auth-callback",
  "Endpoint": "Authorize",
  "SubjectId": "1",
  "Scopes": "openid profile email authorization_api management_api offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8MuQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****67a4"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****fzjw"
    }
  ],
  "ActivityId": "0HLE0N64H1V1K:0000001E",
  "TimeStamp": "2018-05-23T14:29:51Z",
  "ProcessId": 8856,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-05-23 11:29:51.859 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"rac_oidc\",
  \"RedirectUri\": \"http://localhost:5000/auth-callback\",
  \"State\": \"91587cd94c4e4edbab1ddb52de582a81\",
  \"Scope\": \"openid profile email authorization_api management_api offline_access\"
}"
2018-05-23 11:29:51.860 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-05-23 11:29:51.860 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 96.4997ms 302 
2018-05-23 11:29:51.863 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/auth-callback  
2018-05-23 11:29:51.864 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.864 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.865 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Host.All.Controllers.HomeController.Index (Tnf.Rac.Host.All)" with arguments (null) - ModelState is Valid
2018-05-23 11:29:51.865 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.VirtualFileResultExecutor Executing FileResult, sending file as ""
2018-05-23 11:29:51.866 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Host.All.Controllers.HomeController.Index (Tnf.Rac.Host.All)" in 1.0518ms
2018-05-23 11:29:51.866 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.1936ms 404 text/html
2018-05-23 11:29:51.888 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/inline.bundle.js  
2018-05-23 11:29:51.889 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.889 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.889 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/polyfills.bundle.js  
2018-05-23 11:29:51.889 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.bundle.js"'
2018-05-23 11:29:51.890 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/styles.bundle.js  
2018-05-23 11:29:51.890 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.890 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.890 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.bundle.js"'
2018-05-23 11:29:51.890 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.890 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.890 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/scripts.bundle.js  
2018-05-23 11:29:51.890 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/styles.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\styles.bundle.js"'
2018-05-23 11:29:51.891 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/vendor.bundle.js  
2018-05-23 11:29:51.891 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.891 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.891 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.891 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.bundle.js"'
2018-05-23 11:29:51.891 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.892 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/vendor.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\vendor.bundle.js"'
2018-05-23 11:29:51.892 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/main.bundle.js  
2018-05-23 11:29:51.892 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.893 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.893 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.bundle.js"'
2018-05-23 11:29:51.893 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.2092ms 200 application/javascript
2018-05-23 11:29:51.896 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.7842ms 200 application/javascript
2018-05-23 11:29:51.896 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 6.505ms 200 application/javascript
2018-05-23 11:29:51.904 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 15.1554ms 200 application/javascript
2018-05-23 11:29:51.905 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 14.4477ms 200 application/javascript
2018-05-23 11:29:51.962 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/inline.bundle.js.map  
2018-05-23 11:29:51.964 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.964 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:51.965 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.bundle.js.map"'
2018-05-23 11:29:51.967 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.8467ms 200 text/plain
2018-05-23 11:29:52.098 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/polyfills.bundle.js.map  
2018-05-23 11:29:52.099 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:52.099 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:52.099 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.bundle.js.map"'
2018-05-23 11:29:52.103 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/styles.bundle.js.map  
2018-05-23 11:29:52.104 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:52.104 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:52.104 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/styles.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\styles.bundle.js.map"'
2018-05-23 11:29:52.105 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/scripts.bundle.js.map  
2018-05-23 11:29:52.106 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:52.106 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:52.106 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.bundle.js.map"'
2018-05-23 11:29:52.122 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 19.2514ms 200 text/plain
2018-05-23 11:29:52.124 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 26.4956ms 200 text/plain
2018-05-23 11:29:52.124 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 19.8572ms 200 text/plain
2018-05-23 11:29:52.131 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-05-23 11:29:52.131 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:52.132 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:52.134 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:52.137 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'
2018-05-23 11:29:52.140 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 8.5763ms 200 application/x-font-ttf
2018-05-23 11:29:52.292 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 401.3184ms 200 application/javascript
2018-05-23 11:29:54.621 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/vendor.bundle.js.map  
2018-05-23 11:29:54.622 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/main.bundle.js.map  
2018-05-23 11:29:54.622 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.623 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.623 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/vendor.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\vendor.bundle.js.map"'
2018-05-23 11:29:54.623 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.623 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.624 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.bundle.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.bundle.js.map"'
2018-05-23 11:29:54.626 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.8276ms 200 text/plain
2018-05-23 11:29:54.787 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:29:54.788 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.788 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.789 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:29:54.790 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:54.800 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/assets/images/totvs-avatar-default.svg  
2018-05-23 11:29:54.802 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.802 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.802 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/images/totvs-avatar-default.svg"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\images\totvs-avatar-default.svg"'
2018-05-23 11:29:54.803 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.8505ms 200 image/svg+xml
2018-05-23 11:29:54.807 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:54.809 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:54.810 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:54.812 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:54.814 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:54.814 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:54.815 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:29:54.817 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:54.818 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:54.820 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 32.3903ms 200 application/json; charset=UTF-8
2018-05-23 11:29:54.980 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-05-23 11:29:54.981 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.981 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:54.981 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-05-23 11:29:54.982 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.8783ms 200 application/json; charset=UTF-8
2018-05-23 11:29:54.990 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 368.3339ms 200 text/plain
2018-05-23 11:29:55.055 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo  
2018-05-23 11:29:55.056 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:55.056 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:55.056 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-05-23 11:29:55.057 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:55.059 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:55.061 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:55.062 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:55.062 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:55.062 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:55.062 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:55.071 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:55.072 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:55.073 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:55.073 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:55.074 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:55.075 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:55.077 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:29:55.077 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:55.078 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:29:55.078 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:29:55.078 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:29:55.078 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:55.078 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:29:55.079 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:29:55.079 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:29:55.079 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:29:55.081 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:55.083 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:55.085 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:55.088 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:55.091 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:29:55.091 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:55.092 -03:00 [INFO] IdentityServer4.ResponseHandling.UserInfoResponseGenerator Profile service returned to the following claim types: "sub preferred_username name email email_verified"
2018-05-23 11:29:55.092 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 37.3467ms 200 application/json; charset=UTF-8
2018-05-23 11:29:55.118 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5000/api/Permissions application/json 83
2018-05-23 11:29:55.118 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:55.119 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:55.119 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:55.121 -03:00 [INFO] Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler Successfully validated the token.
2018-05-23 11:29:55.121 -03:00 [INFO] Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was successfully authenticated.
2018-05-23 11:29:55.121 -03:00 [INFO] IdentityServer4.AccessTokenValidation.IdentityServerAuthenticationHandler AuthenticationScheme: "Bearer" was successfully authenticated.
2018-05-23 11:29:55.121 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "1".
2018-05-23 11:29:55.122 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Host.Authorization.Controllers.PermissionsController.GetGrantedByPermissions (Tnf.Rac.Host.Authorization)" with arguments (["System.Collections.Generic.List`1[System.String]"]) - ModelState is Valid
2018-05-23 11:29:55.129 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:29:55.129 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Host.Authorization.Controllers.PermissionsController.GetGrantedByPermissions (Tnf.Rac.Host.Authorization)" in 9.6708ms
2018-05-23 11:29:55.130 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 12.2809ms 200 application/json; charset=utf-8
2018-05-23 11:29:55.190 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession  
2018-05-23 11:29:55.191 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:55.191 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:55.191 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession"
2018-05-23 11:29:55.191 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.0906ms 200 text/html; charset=UTF-8
2018-05-23 11:29:55.210 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-Bold.51066f4d1d33630cd761.ttf  
2018-05-23 11:29:55.211 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:55.212 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:55.212 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:55.212 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/NunitoSans-Bold.51066f4d1d33630cd761.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\NunitoSans-Bold.51066f4d1d33630cd761.ttf"'
2018-05-23 11:29:55.260 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 49.7387ms 200 application/x-font-ttf
2018-05-23 11:29:57.487 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/common.chunk.js  
2018-05-23 11:29:57.488 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/tenant.module.chunk.js  
2018-05-23 11:29:57.488 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.488 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.489 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.489 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/common.chunk.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\common.chunk.js"'
2018-05-23 11:29:57.489 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.489 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/tenant.module.chunk.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\tenant.module.chunk.js"'
2018-05-23 11:29:57.489 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.8674ms 200 application/javascript
2018-05-23 11:29:57.490 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.9048ms 200 application/javascript
2018-05-23 11:29:57.515 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/tenant.module.chunk.js.map  
2018-05-23 11:29:57.517 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.517 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.518 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/tenant.module.chunk.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\tenant.module.chunk.js.map"'
2018-05-23 11:29:57.520 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.402ms 200 text/plain
2018-05-23 11:29:57.614 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:29:57.615 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.615 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.617 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:29:57.617 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:29:57.618 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:57.620 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:57.620 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:57.621 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:29:57.623 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:29:57.623 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:29:57.623 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:29:57.623 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:29:57.624 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:29:57.625 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.9886ms 200 application/json; charset=UTF-8
2018-05-23 11:29:57.654 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/tenant?page=1&pageSize=20  
2018-05-23 11:29:57.654 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.654 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.655 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "admin".
2018-05-23 11:29:57.655 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" with arguments (["Tnf.Rac.Dtos.TenantQueryDto"]) - ModelState is Valid
2018-05-23 11:29:57.659 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/TotvsIcon.683aa55aa3feb2d437b7.ttf  
2018-05-23 11:29:57.659 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:57.660 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:29:57.660 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" in 5.1972ms
2018-05-23 11:29:57.660 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 6.3464ms 200 application/json; charset=utf-8
2018-05-23 11:29:57.660 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.660 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.661 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/TotvsIcon.683aa55aa3feb2d437b7.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\TotvsIcon.683aa55aa3feb2d437b7.ttf"'
2018-05-23 11:29:57.662 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.3805ms 200 application/x-font-ttf
2018-05-23 11:29:57.664 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf  
2018-05-23 11:29:57.664 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-23 11:29:57.666 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.666 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.666 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\NunitoSans-ExtraLight.bc36a8726e20804a94da.ttf"'
2018-05-23 11:29:57.670 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.6961ms 200 application/x-font-ttf
2018-05-23 11:29:57.694 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/common.chunk.js.map  
2018-05-23 11:29:57.695 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.695 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.695 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/common.chunk.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\common.chunk.js.map"'
2018-05-23 11:29:57.703 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 7.8665ms 200 text/plain
2018-05-23 11:29:57.748 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession  
2018-05-23 11:29:57.750 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.751 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:29:57.751 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession"
2018-05-23 11:29:57.751 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.3343ms 200 text/html; charset=UTF-8
2018-05-23 11:30:01.132 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/organizationUnit.module.chunk.js  
2018-05-23 11:30:01.133 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.133 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.134 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/organizationUnit.module.chunk.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\organizationUnit.module.chunk.js"'
2018-05-23 11:30:01.135 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.1252ms 200 application/javascript
2018-05-23 11:30:01.238 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:30:01.239 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.239 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.240 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:30:01.240 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:01.241 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:01.243 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:30:01.243 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:01.245 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:01.247 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:30:01.247 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:01.247 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:30:01.247 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:30:01.248 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:01.252 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 13.1455ms 200 application/json; charset=UTF-8
2018-05-23 11:30:01.267 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/organizationUnit?page=1&pageSize=20  
2018-05-23 11:30:01.267 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.267 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.268 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "admin".
2018-05-23 11:30:01.268 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Management.Api.Controllers.OrganizationUnitController.GetAllAsync (Tnf.Rac.Management.Api)" with arguments (["Tnf.Rac.Dtos.OrganizationQueryDto"]) - ModelState is Valid
2018-05-23 11:30:01.273 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:30:01.273 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Management.Api.Controllers.OrganizationUnitController.GetAllAsync (Tnf.Rac.Management.Api)" in 5.364ms
2018-05-23 11:30:01.273 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 6.9194ms 200 application/json; charset=utf-8
2018-05-23 11:30:01.281 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/organizationUnit.module.chunk.js.map  
2018-05-23 11:30:01.283 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.283 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.284 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/organizationUnit.module.chunk.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\organizationUnit.module.chunk.js.map"'
2018-05-23 11:30:01.288 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.901ms 200 text/plain
2018-05-23 11:30:01.314 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession  
2018-05-23 11:30:01.315 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.315 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.315 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession"
2018-05-23 11:30:01.315 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.4682ms 200 text/html; charset=UTF-8
2018-05-23 11:30:01.810 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/tenant?page=1&pageSize=20  
2018-05-23 11:30:01.811 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.811 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:01.812 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "admin".
2018-05-23 11:30:01.812 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" with arguments (["Tnf.Rac.Dtos.TenantQueryDto"]) - ModelState is Valid
2018-05-23 11:30:01.818 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:30:01.819 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" in 7.1736ms
2018-05-23 11:30:01.819 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 8.8993ms 200 application/json; charset=utf-8
2018-05-23 11:30:56.296 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fassets%2Fsilent-renew.html&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=47a133566739442db82cf0aeaad237b3&nonce=a2c4ae07c33e4cd9b3e7bd1420104795&prompt=none&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6ImE0M2VhYmJkMzRjZTYwNzE5YzU0MWFhNzE4ZWU1NGE3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjcwODU3OTEsImV4cCI6MTUyNzA4NTg3MSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoicmFjX29pZGMiLCJub25jZSI6ImM0ZDAxMjk0ZGY1ZDQ2OGVhZjRjZjEzNDQzN2E5OGU1IiwiaWF0IjoxNTI3MDg1NzkxLCJhdF9oYXNoIjoicHZ4cVFIM3A4elRWTVM2MFgtZmNoQSIsImNfaGFzaCI6Im9leXZ3OXBGUjhmaW03N3MwVDZTcmciLCJzaWQiOiI0YjllNWM3YTRmYTY1MjBhMzY2MmVhNDc0NTI4YzQ3ZSIsInN1YiI6IjEiLCJhdXRoX3RpbWUiOjE1MjcwODU3OTEsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.gfQigreUCgIgdGxAo8Nasf3EaXA59RLehaLOQ9V4QSEnlTIx1vBYe7iJ1oBjdz-VjFAr3kInTWbCwQ3MIazMH8p7cfuq1aR5PLEm2GRXo27ooJlPSbzIdrwUmYGSiiIAZuSK3bncWpQnZbbV_S0E4I5PeMM2p7axUyWGBmjQcDW5joxqv3fyqlpjPo82unXPrAOKHD6gzs23GJiV8uXdJU4s6wk-3R7YFyl3cDSZZXDgKCC0jiZ04eEzNlQE6bowJFA3DISUUAb9PD0XtSLg8r9r6sRy3pdNrWR_aBV7IK27inaqGlj9lx6J3Mr1CBUXi6EqvUxiRGQb0NW6gw8MuQ  
2018-05-23 11:30:56.297 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.297 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.298 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-05-23 11:30:56.299 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:56.300 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.303 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:30:56.303 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.304 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:30:56.305 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:30:56.306 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:30:56.306 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:56.307 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:30:56.307 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:30:56.307 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:30:56.308 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:30:56.309 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.311 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:56.311 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.313 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.314 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:30:56.315 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.316 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:30:56.316 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:30:56.317 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:56.320 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.322 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:56.322 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.324 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.326 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:30:56.327 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.327 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:30:56.328 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:30:56.329 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:56.337 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost:5000/assets/silent-renew.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"47a133566739442db82cf0aeaad237b3\",
  \"Nonce\": \"a2c4ae07c33e4cd9b3e7bd1420104795\",
  \"PromptMode\": \"none\",
  \"SessionId\": \"4b9e5c7a4fa6520a3662ea474528c47e\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost:5000/assets/silent-renew.html\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"47a133566739442db82cf0aeaad237b3\",
    \"nonce\": \"a2c4ae07c33e4cd9b3e7bd1420104795\",
    \"prompt\": \"none\",
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImE0M2VhYmJkMzRjZTYwNzE5YzU0MWFhNzE4ZWU1NGE3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjcwODU3OTEsImV4cCI6MTUyNzA4NTg3MSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoicmFjX29pZGMiLCJub25jZSI6ImM0ZDAxMjk0ZGY1ZDQ2OGVhZjRjZjEzNDQzN2E5OGU1IiwiaWF0IjoxNTI3MDg1NzkxLCJhdF9oYXNoIjoicHZ4cVFIM3A4elRWTVM2MFgtZmNoQSIsImNfaGFzaCI6Im9leXZ3OXBGUjhmaW03N3MwVDZTcmciLCJzaWQiOiI0YjllNWM3YTRmYTY1MjBhMzY2MmVhNDc0NTI4YzQ3ZSIsInN1YiI6IjEiLCJhdXRoX3RpbWUiOjE1MjcwODU3OTEsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.gfQigreUCgIgdGxAo8Nasf3EaXA59RLehaLOQ9V4QSEnlTIx1vBYe7iJ1oBjdz-VjFAr3kInTWbCwQ3MIazMH8p7cfuq1aR5PLEm2GRXo27ooJlPSbzIdrwUmYGSiiIAZuSK3bncWpQnZbbV_S0E4I5PeMM2p7axUyWGBmjQcDW5joxqv3fyqlpjPo82unXPrAOKHD6gzs23GJiV8uXdJU4s6wk-3R7YFyl3cDSZZXDgKCC0jiZ04eEzNlQE6bowJFA3DISUUAb9PD0XtSLg8r9r6sRy3pdNrWR_aBV7IK27inaqGlj9lx6J3Mr1CBUXi6EqvUxiRGQb0NW6gw8MuQ\"
  }
}"
2018-05-23 11:30:56.381 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLitePersistedGrantDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:56.382 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.387 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("4"ms) [Parameters=["@__token_Key_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Key\", \"x\".\"ClientId\", \"x\".\"CreationTime\", \"x\".\"Data\", \"x\".\"Expiration\", \"x\".\"SubjectId\", \"x\".\"Type\"
FROM \"PersistedGrants\" AS \"x\"
WHERE \"x\".\"Key\" = @__token_Key_0
LIMIT 2"
2018-05-23 11:30:56.390 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.401 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("9"ms) [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"PersistedGrants\" (\"Key\", \"ClientId\", \"CreationTime\", \"Data\", \"Expiration\", \"SubjectId\", \"Type\")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);"
2018-05-23 11:30:56.419 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "rac_oidc",
  "ClientName": "OIDC Client for RAC",
  "RedirectUri": "http://localhost:5000/assets/silent-renew.html",
  "Endpoint": "Authorize",
  "SubjectId": "1",
  "Scopes": "openid profile email authorization_api management_api offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****V8QA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****9f88"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****k8dw"
    }
  ],
  "ActivityId": "0HLE0N64H1V1M:00000025",
  "TimeStamp": "2018-05-23T14:30:56Z",
  "ProcessId": 8856,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-05-23 11:30:56.419 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"rac_oidc\",
  \"RedirectUri\": \"http://localhost:5000/assets/silent-renew.html\",
  \"State\": \"47a133566739442db82cf0aeaad237b3\",
  \"Scope\": \"openid profile email authorization_api management_api offline_access\"
}"
2018-05-23 11:30:56.419 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 123.2757ms 302 
2018-05-23 11:30:56.431 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/assets/silent-renew.html  
2018-05-23 11:30:56.432 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.433 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.433 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/silent-renew.html"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\silent-renew.html"'
2018-05-23 11:30:56.483 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 51.6133ms 200 text/html
2018-05-23 11:30:56.544 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/assets/oidc-client.min.js  
2018-05-23 11:30:56.544 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.544 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.545 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/oidc-client.min.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\oidc-client.min.js"'
2018-05-23 11:30:56.758 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 214.3462ms 200 application/javascript
2018-05-23 11:30:56.831 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fassets%2Fsilent-renew.html&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=fd6c21f45e724ca19b91c6665e9f47f2&nonce=68a07cf8678d4298820bcaf991aebc93&prompt=none&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6ImE0M2VhYmJkMzRjZTYwNzE5YzU0MWFhNzE4ZWU1NGE3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjcwODU3OTEsImV4cCI6MTUyNzA4NTg3MSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoicmFjX29pZGMiLCJub25jZSI6ImM0ZDAxMjk0ZGY1ZDQ2OGVhZjRjZjEzNDQzN2E5OGU1IiwiaWF0IjoxNTI3MDg1NzkxLCJhdF9oYXNoIjoicHZ4cVFIM3A4elRWTVM2MFgtZmNoQSIsImNfaGFzaCI6Im9leXZ3OXBGUjhmaW03N3MwVDZTcmciLCJzaWQiOiI0YjllNWM3YTRmYTY1MjBhMzY2MmVhNDc0NTI4YzQ3ZSIsInN1YiI6IjEiLCJhdXRoX3RpbWUiOjE1MjcwODU3OTEsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.gfQigreUCgIgdGxAo8Nasf3EaXA59RLehaLOQ9V4QSEnlTIx1vBYe7iJ1oBjdz-VjFAr3kInTWbCwQ3MIazMH8p7cfuq1aR5PLEm2GRXo27ooJlPSbzIdrwUmYGSiiIAZuSK3bncWpQnZbbV_S0E4I5PeMM2p7axUyWGBmjQcDW5joxqv3fyqlpjPo82unXPrAOKHD6gzs23GJiV8uXdJU4s6wk-3R7YFyl3cDSZZXDgKCC0jiZ04eEzNlQE6bowJFA3DISUUAb9PD0XtSLg8r9r6sRy3pdNrWR_aBV7IK27inaqGlj9lx6J3Mr1CBUXi6EqvUxiRGQb0NW6gw8MuQ  
2018-05-23 11:30:56.832 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.832 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.833 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-05-23 11:30:56.833 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:56.880 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fassets%2Fsilent-renew.html&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=6ec74b8d0e5349ceb537117c2c844ee6&nonce=882d72c8204541e79e0caf9bfcc58a70&prompt=none&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6ImE0M2VhYmJkMzRjZTYwNzE5YzU0MWFhNzE4ZWU1NGE3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjcwODU3OTEsImV4cCI6MTUyNzA4NTg3MSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoicmFjX29pZGMiLCJub25jZSI6ImM0ZDAxMjk0ZGY1ZDQ2OGVhZjRjZjEzNDQzN2E5OGU1IiwiaWF0IjoxNTI3MDg1NzkxLCJhdF9oYXNoIjoicHZ4cVFIM3A4elRWTVM2MFgtZmNoQSIsImNfaGFzaCI6Im9leXZ3OXBGUjhmaW03N3MwVDZTcmciLCJzaWQiOiI0YjllNWM3YTRmYTY1MjBhMzY2MmVhNDc0NTI4YzQ3ZSIsInN1YiI6IjEiLCJhdXRoX3RpbWUiOjE1MjcwODU3OTEsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.gfQigreUCgIgdGxAo8Nasf3EaXA59RLehaLOQ9V4QSEnlTIx1vBYe7iJ1oBjdz-VjFAr3kInTWbCwQ3MIazMH8p7cfuq1aR5PLEm2GRXo27ooJlPSbzIdrwUmYGSiiIAZuSK3bncWpQnZbbV_S0E4I5PeMM2p7axUyWGBmjQcDW5joxqv3fyqlpjPo82unXPrAOKHD6gzs23GJiV8uXdJU4s6wk-3R7YFyl3cDSZZXDgKCC0jiZ04eEzNlQE6bowJFA3DISUUAb9PD0XtSLg8r9r6sRy3pdNrWR_aBV7IK27inaqGlj9lx6J3Mr1CBUXi6EqvUxiRGQb0NW6gw8MuQ  
2018-05-23 11:30:56.883 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.883 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:56.884 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-05-23 11:30:56.885 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:56.895 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.898 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:30:56.899 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.901 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:30:56.901 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:30:56.902 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:30:56.902 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:56.902 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:30:56.902 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:30:56.903 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:30:56.903 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:30:56.904 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.906 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:56.907 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.909 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.910 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:30:56.911 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.912 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:30:56.912 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:30:56.913 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:56.915 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.917 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:56.918 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.920 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.922 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:30:56.922 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.923 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:30:56.923 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:30:56.924 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:56.924 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost:5000/assets/silent-renew.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"fd6c21f45e724ca19b91c6665e9f47f2\",
  \"Nonce\": \"68a07cf8678d4298820bcaf991aebc93\",
  \"PromptMode\": \"none\",
  \"SessionId\": \"4b9e5c7a4fa6520a3662ea474528c47e\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost:5000/assets/silent-renew.html\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"fd6c21f45e724ca19b91c6665e9f47f2\",
    \"nonce\": \"68a07cf8678d4298820bcaf991aebc93\",
    \"prompt\": \"none\",
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImE0M2VhYmJkMzRjZTYwNzE5YzU0MWFhNzE4ZWU1NGE3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjcwODU3OTEsImV4cCI6MTUyNzA4NTg3MSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoicmFjX29pZGMiLCJub25jZSI6ImM0ZDAxMjk0ZGY1ZDQ2OGVhZjRjZjEzNDQzN2E5OGU1IiwiaWF0IjoxNTI3MDg1NzkxLCJhdF9oYXNoIjoicHZ4cVFIM3A4elRWTVM2MFgtZmNoQSIsImNfaGFzaCI6Im9leXZ3OXBGUjhmaW03N3MwVDZTcmciLCJzaWQiOiI0YjllNWM3YTRmYTY1MjBhMzY2MmVhNDc0NTI4YzQ3ZSIsInN1YiI6IjEiLCJhdXRoX3RpbWUiOjE1MjcwODU3OTEsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.gfQigreUCgIgdGxAo8Nasf3EaXA59RLehaLOQ9V4QSEnlTIx1vBYe7iJ1oBjdz-VjFAr3kInTWbCwQ3MIazMH8p7cfuq1aR5PLEm2GRXo27ooJlPSbzIdrwUmYGSiiIAZuSK3bncWpQnZbbV_S0E4I5PeMM2p7axUyWGBmjQcDW5joxqv3fyqlpjPo82unXPrAOKHD6gzs23GJiV8uXdJU4s6wk-3R7YFyl3cDSZZXDgKCC0jiZ04eEzNlQE6bowJFA3DISUUAb9PD0XtSLg8r9r6sRy3pdNrWR_aBV7IK27inaqGlj9lx6J3Mr1CBUXi6EqvUxiRGQb0NW6gw8MuQ\"
  }
}"
2018-05-23 11:30:56.930 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.932 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:30:56.932 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.933 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:30:56.933 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:30:56.933 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:30:56.933 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:56.934 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:30:56.934 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:30:56.934 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:30:56.934 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:30:56.935 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.938 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:56.944 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.948 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.949 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:30:56.950 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.951 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:30:56.951 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:30:56.952 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:56.954 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.956 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:56.957 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.959 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.961 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-23 11:30:56.962 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:56.962 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-23 11:30:56.962 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:30:56.963 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:56.964 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost:5000/assets/silent-renew.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"6ec74b8d0e5349ceb537117c2c844ee6\",
  \"Nonce\": \"882d72c8204541e79e0caf9bfcc58a70\",
  \"PromptMode\": \"none\",
  \"SessionId\": \"4b9e5c7a4fa6520a3662ea474528c47e\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost:5000/assets/silent-renew.html\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"6ec74b8d0e5349ceb537117c2c844ee6\",
    \"nonce\": \"882d72c8204541e79e0caf9bfcc58a70\",
    \"prompt\": \"none\",
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImE0M2VhYmJkMzRjZTYwNzE5YzU0MWFhNzE4ZWU1NGE3IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjcwODU3OTEsImV4cCI6MTUyNzA4NTg3MSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoicmFjX29pZGMiLCJub25jZSI6ImM0ZDAxMjk0ZGY1ZDQ2OGVhZjRjZjEzNDQzN2E5OGU1IiwiaWF0IjoxNTI3MDg1NzkxLCJhdF9oYXNoIjoicHZ4cVFIM3A4elRWTVM2MFgtZmNoQSIsImNfaGFzaCI6Im9leXZ3OXBGUjhmaW03N3MwVDZTcmciLCJzaWQiOiI0YjllNWM3YTRmYTY1MjBhMzY2MmVhNDc0NTI4YzQ3ZSIsInN1YiI6IjEiLCJhdXRoX3RpbWUiOjE1MjcwODU3OTEsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.gfQigreUCgIgdGxAo8Nasf3EaXA59RLehaLOQ9V4QSEnlTIx1vBYe7iJ1oBjdz-VjFAr3kInTWbCwQ3MIazMH8p7cfuq1aR5PLEm2GRXo27ooJlPSbzIdrwUmYGSiiIAZuSK3bncWpQnZbbV_S0E4I5PeMM2p7axUyWGBmjQcDW5joxqv3fyqlpjPo82unXPrAOKHD6gzs23GJiV8uXdJU4s6wk-3R7YFyl3cDSZZXDgKCC0jiZ04eEzNlQE6bowJFA3DISUUAb9PD0XtSLg8r9r6sRy3pdNrWR_aBV7IK27inaqGlj9lx6J3Mr1CBUXi6EqvUxiRGQb0NW6gw8MuQ\"
  }
}"
2018-05-23 11:30:56.975 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLitePersistedGrantDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:56.975 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:56.977 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__token_Key_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Key\", \"x\".\"ClientId\", \"x\".\"CreationTime\", \"x\".\"Data\", \"x\".\"Expiration\", \"x\".\"SubjectId\", \"x\".\"Type\"
FROM \"PersistedGrants\" AS \"x\"
WHERE \"x\".\"Key\" = @__token_Key_0
LIMIT 2"
2018-05-23 11:30:56.978 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.008 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLitePersistedGrantDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:57.009 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.009 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("30"ms) [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"PersistedGrants\" (\"Key\", \"ClientId\", \"CreationTime\", \"Data\", \"Expiration\", \"SubjectId\", \"Type\")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);"
2018-05-23 11:30:57.041 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "rac_oidc",
  "ClientName": "OIDC Client for RAC",
  "RedirectUri": "http://localhost:5000/assets/silent-renew.html",
  "Endpoint": "Authorize",
  "SubjectId": "1",
  "Scopes": "openid profile email authorization_api management_api offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****oSmA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4772"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****RAmw"
    }
  ],
  "ActivityId": "0HLE0N64H1V1J:0000001C",
  "TimeStamp": "2018-05-23T14:30:57Z",
  "ProcessId": 8856,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-05-23 11:30:57.041 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"rac_oidc\",
  \"RedirectUri\": \"http://localhost:5000/assets/silent-renew.html\",
  \"State\": \"fd6c21f45e724ca19b91c6665e9f47f2\",
  \"Scope\": \"openid profile email authorization_api management_api offline_access\"
}"
2018-05-23 11:30:57.042 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 210.6384ms 302 
2018-05-23 11:30:57.070 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("61"ms) [Parameters=["@__token_Key_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Key\", \"x\".\"ClientId\", \"x\".\"CreationTime\", \"x\".\"Data\", \"x\".\"Expiration\", \"x\".\"SubjectId\", \"x\".\"Type\"
FROM \"PersistedGrants\" AS \"x\"
WHERE \"x\".\"Key\" = @__token_Key_0
LIMIT 2"
2018-05-23 11:30:57.071 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-05-23 11:30:57.072 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.073 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.073 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-05-23 11:30:57.074 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.9894ms 200 application/json; charset=UTF-8
2018-05-23 11:30:57.087 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/assets/silent-renew.html  
2018-05-23 11:30:57.088 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.096 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.097 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/silent-renew.html"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\silent-renew.html"'
2018-05-23 11:30:57.097 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.1515ms 200 text/html
2018-05-23 11:30:57.098 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.113 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("13"ms) [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"PersistedGrants\" (\"Key\", \"ClientId\", \"CreationTime\", \"Data\", \"Expiration\", \"SubjectId\", \"Type\")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);"
2018-05-23 11:30:57.155 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo  
2018-05-23 11:30:57.156 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "rac_oidc",
  "ClientName": "OIDC Client for RAC",
  "RedirectUri": "http://localhost:5000/assets/silent-renew.html",
  "Endpoint": "Authorize",
  "SubjectId": "1",
  "Scopes": "openid profile email authorization_api management_api offline_access",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****KjSA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****6c7a"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****RAmw"
    }
  ],
  "ActivityId": "0HLE0N64H1V1O:0000000F",
  "TimeStamp": "2018-05-23T14:30:57Z",
  "ProcessId": 8856,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-05-23 11:30:57.156 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"rac_oidc\",
  \"RedirectUri\": \"http://localhost:5000/assets/silent-renew.html\",
  \"State\": \"6ec74b8d0e5349ceb537117c2c844ee6\",
  \"Scope\": \"openid profile email authorization_api management_api offline_access\"
}"
2018-05-23 11:30:57.156 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 276.7411ms 302 
2018-05-23 11:30:57.159 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.159 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.160 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-05-23 11:30:57.161 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:57.179 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.181 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:30:57.181 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.182 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:30:57.182 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:30:57.182 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:30:57.182 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:57.182 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:30:57.183 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:30:57.183 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:30:57.183 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:30:57.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.187 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:30:57.187 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.187 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:30:57.187 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:30:57.187 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:30:57.188 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:57.188 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:30:57.188 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:30:57.188 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:30:57.188 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:30:57.190 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.194 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/assets/silent-renew.html  
2018-05-23 11:30:57.195 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.195 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.195 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/silent-renew.html"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\silent-renew.html"'
2018-05-23 11:30:57.195 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.6999ms 200 text/html
2018-05-23 11:30:57.204 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:57.205 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.209 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.211 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:57.212 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.213 -03:00 [INFO] IdentityServer4.ResponseHandling.UserInfoResponseGenerator Profile service returned to the following claim types: "sub preferred_username name email email_verified"
2018-05-23 11:30:57.213 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 58.7993ms 200 application/json; charset=UTF-8
2018-05-23 11:30:57.461 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo  
2018-05-23 11:30:57.463 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.463 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.463 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-05-23 11:30:57.464 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:57.465 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.467 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:30:57.467 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:30:57.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:30:57.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:30:57.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:57.468 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:30:57.469 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:30:57.469 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:30:57.469 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:30:57.470 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.472 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:30:57.472 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.472 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:30:57.472 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:30:57.473 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:30:57.473 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:57.473 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:30:57.473 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:30:57.473 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:30:57.474 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:30:57.475 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.477 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:57.477 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.479 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.481 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:57.481 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.482 -03:00 [INFO] IdentityServer4.ResponseHandling.UserInfoResponseGenerator Profile service returned to the following claim types: "sub preferred_username name email email_verified"
2018-05-23 11:30:57.482 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 20.3802ms 200 application/json; charset=UTF-8
2018-05-23 11:30:57.693 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks  
2018-05-23 11:30:57.694 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.695 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.695 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-05-23 11:30:57.696 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.8156ms 200 application/json; charset=UTF-8
2018-05-23 11:30:57.848 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo  
2018-05-23 11:30:57.849 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.849 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:30:57.849 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-05-23 11:30:57.851 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:30:57.852 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.854 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:30:57.855 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.856 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:30:57.857 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:30:57.858 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:30:57.859 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:57.859 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:30:57.859 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:30:57.859 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:30:57.860 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:30:57.861 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.863 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-23 11:30:57.863 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.863 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-23 11:30:57.863 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-23 11:30:57.864 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-23 11:30:57.864 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:30:57.864 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-23 11:30:57.864 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-23 11:30:57.864 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-23 11:30:57.865 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-23 11:30:57.866 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.868 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:57.868 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.870 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:30:57.871 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
ORDER BY \"identityResource\".\"Id\""
2018-05-23 11:30:57.872 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api', 'offline_access')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:30:57.873 -03:00 [INFO] IdentityServer4.ResponseHandling.UserInfoResponseGenerator Profile service returned to the following claim types: "sub preferred_username name email email_verified"
2018-05-23 11:30:57.873 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 25.6155ms 200 application/json; charset=UTF-8
2018-05-23 11:31:02.161 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/organizationUnit?page=1&pageSize=20  
2018-05-23 11:31:02.162 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:02.162 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:02.163 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "admin".
2018-05-23 11:31:02.163 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Management.Api.Controllers.OrganizationUnitController.GetAllAsync (Tnf.Rac.Management.Api)" with arguments (["Tnf.Rac.Dtos.OrganizationQueryDto"]) - ModelState is Valid
2018-05-23 11:31:02.167 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:31:02.167 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Management.Api.Controllers.OrganizationUnitController.GetAllAsync (Tnf.Rac.Management.Api)" in 4.5149ms
2018-05-23 11:31:02.167 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.7829ms 200 application/json; charset=utf-8
2018-05-23 11:31:02.892 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/tenant?page=1&pageSize=20  
2018-05-23 11:31:02.893 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:02.893 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:02.893 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "admin".
2018-05-23 11:31:02.894 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" with arguments (["Tnf.Rac.Dtos.TenantQueryDto"]) - ModelState is Valid
2018-05-23 11:31:02.898 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-23 11:31:02.898 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.Management.Api.Controllers.TenantController.GetAllAsync (Tnf.Rac.Management.Api)" in 5.0586ms
2018-05-23 11:31:02.899 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 6.2388ms 200 application/json; charset=utf-8
2018-05-23 11:31:03.713 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/role.module.chunk.js  
2018-05-23 11:31:03.714 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:03.714 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:03.714 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/role.module.chunk.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\role.module.chunk.js"'
2018-05-23 11:31:03.873 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 160.3051ms 200 application/javascript
2018-05-23 11:31:04.303 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration  
2018-05-23 11:31:04.304 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:04.305 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:04.306 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-23 11:31:04.307 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-23 11:31:04.308 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:31:04.310 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:31:04.310 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:31:04.311 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-23 11:31:04.313 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-23 11:31:04.313 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-23 11:31:04.313 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-23 11:31:04.314 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-23 11:31:04.314 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-23 11:31:04.315 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 12.0764ms 200 application/json; charset=UTF-8
2018-05-23 11:31:04.315 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/role?page=1&pageSize=20  
2018-05-23 11:31:04.316 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:04.317 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:04.325 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/role.module.chunk.js.map  
2018-05-23 11:31:04.326 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:04.326 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" was successfully authenticated.
2018-05-23 11:31:04.326 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/role.module.chunk.js.map"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\role.module.chunk.js.map"'
2018-05-23 11:31:04.335 -03:00 [INFO] Microsoft.AspNetCore.Authorization.DefaultAuthorizationService Authorization was successful for user: "admin".
2018-05-23 11:31:04.342 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.Management.Api.Controllers.RoleController.GetAll (Tnf.Rac.Management.Api)" with arguments (["Tnf.Rac.Dtos.TnfRoleQueryDto"]) - ModelState is Valid
2018-05-23 11:31:04.423 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5000/api/tenant?page=1&pageSize=20  
2018-05-23 11:31:04.423 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Ide